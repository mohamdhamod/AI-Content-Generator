const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/swiper-DpKYHp1-.js","assets/utils-D71RtZIR.js","assets/index-BvN21dhf.js","assets/quill-ChYgufvi.js","assets/vendor-CnHzkViu.js","assets/easymde-Ca5tH7jq.js"])))=>i.map(i=>d[i]);
import{r as Ae,a as ke,g as De,b as Pe,D as ge}from"./vendor-CnHzkViu.js";const Ne="modulepreload",Me=function(e){return"/build/"+e},he={},J=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){let h=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(L=>({status:"fulfilled",value:L}),L=>({status:"rejected",reason:L}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=r?.nonce||r?.getAttribute("nonce");a=h(n.map(g=>{if(g=Me(g),g in he)return;he[g]=!0;const m=g.endsWith(".css"),L=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${L}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":Ne,m||(p.as="script"),p.crossOrigin="",p.href=g,d&&p.setAttribute("nonce",d),document.head.appendChild(p),m)return new Promise((C,y)=>{p.addEventListener("load",C),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return a.then(r=>{for(const d of r||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})};Ae();ke();let fe=!1;async function ce(){if(fe||!document.getElementById("contentChart"))return;const t=await J(()=>import("./auto-CcLMyVVA.js"),[]),n=t&&t.default?t.default:t;window.Chart=n,fe=!0,window.chartsInitialized=!0,n.defaults&&(n.defaults.animation=n.defaults.animation||{},n.defaults.animation.duration=1e3,n.defaults.animation.easing="easeOutQuart",n.defaults.responsive=!0)}function Fe(){document.readyState==="complete"?ce():window.addEventListener("load",ce)}window.initializeCharts=ce;Fe();document.addEventListener("DOMContentLoaded",function(){initializeCharts(),Oe()});function Oe(){const e=document.documentElement;window.innerWidth<992?e.setAttribute("data-sidenav-size","offcanvas"):e.setAttribute("data-sidenav-size","default"),de()}function we(){const e=document.documentElement;e.getAttribute("data-sidenav-size")==="collapse"?e.setAttribute("data-sidenav-size","default"):e.setAttribute("data-sidenav-size","collapse"),de(),typeof oe=="function"&&oe()}function de(){const e=document.documentElement,t=document.querySelector(".menu-collapse-box .button-collapse-toggle");if(!t)return;const n=t.querySelector("i"),i=t.querySelector("span"),a=e.getAttribute("data-sidenav-size")==="collapse",l=t.getAttribute("data-text-collapse")||(i&&i.textContent?i.textContent:""),r=t.getAttribute("data-text-expand")||l;if(n){const h=a?"bi bi-chevron-double-right":"bi bi-chevron-double-left";n.className!==h&&(n.className=h)}if(i){const h=a?r:l;i.textContent!==h&&(i.textContent=h)}const d=document.querySelector(".sidenav-menu");d&&(a?d.classList.add("force-collapse"):d.classList.remove("force-collapse"))}function ye(){document.documentElement.classList.toggle("sidebar-enable"),typeof oe=="function"&&oe()}window.toggleSidebar=we;window.toggleMobileSidebar=ye;document.addEventListener("click",function(e){const t=document.getElementById("sidenavMenu"),n=document.querySelector(".button-collapse-toggle.d-xl-none"),i=document.documentElement;window.innerWidth<992&&t&&n&&!t.contains(e.target)&&!n.contains(e.target)&&i.classList.contains("sidebar-enable")&&i.classList.remove("sidebar-enable")});function qe(){const e=document.documentElement;window.innerWidth>=992?(e.classList.remove("sidebar-enable"),e.getAttribute("data-sidenav-size")==="offcanvas"&&e.setAttribute("data-sidenav-size","default")):e.getAttribute("data-sidenav-size")!=="offcanvas"&&e.setAttribute("data-sidenav-size","offcanvas"),de()}function Be(e,t){let n;return function(...i){clearTimeout(n),n=setTimeout(()=>e.apply(this,i),t)}}function oe(){const e=document.documentElement;try{e&&e.getAttribute&&e.getAttribute("dir")==="rtl"&&(e.classList.add("ins-rtl-repaint"),setTimeout(()=>e.classList.remove("ins-rtl-repaint"),60))}catch{}}function je(e,t){const n=document.getElementById("selected-language-image"),i=document.getElementById("selected-language-flag"),a=document.getElementById("selected-language-code");if(n&&(t?n.src=t:window.FLAG_URLS&&window.FLAG_URLS[e]&&(n.src=window.FLAG_URLS[e])),i){const l=[];i.classList.forEach(r=>{r.startsWith("fi-")&&l.push(r)}),l.forEach(r=>i.classList.remove(r)),i.classList.add(`fi-${e}`)}a&&(a.textContent=` ${e.toUpperCase()}`)}window.changeLanguage=je;window.addEventListener("resize",Be(qe,150));document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".menu-collapse-box .button-collapse-toggle");e&&(e.getAttribute("onclick")||e.addEventListener("click",function(n){we()}));const t=document.querySelector(".button-collapse-toggle.d-xl-none");t&&(t.getAttribute("onclick")||t.addEventListener("click",function(n){ye()}))});document.addEventListener("DOMContentLoaded",function(){typeof initializeCharts=="function"&&initializeCharts();var e=document.querySelector(".topbar-link .bi-moon, .topbar-link .bi-moon-stars");e&&e.parentElement.addEventListener("click",function(){var t=document.documentElement,n=t.getAttribute("data-bs-theme");t.setAttribute("data-bs-theme",n==="dark"?"light":"dark")})});document.addEventListener("click",function(e){try{let l=function(r){return function d(h){if(!(h&&h.propertyName&&h.propertyName!=="max-height")){var g=r.closest(".card"),m=g&&g.classList.contains("card-collapse");m?(r.style.overflow="hidden",r.style.maxHeight="0px"):(r.style.overflow="",r.style.maxHeight=""),r.__cardAnimating=!1,r.removeEventListener("transitionend",d)}}};var t=e.target&&e.target.closest?e.target.closest(".card-action-item"):null;if(!t)return;var n=t.closest(".card");if(!n)return;var i=!n.classList.contains("card-collapse"),a=n.querySelectorAll(".card-body");a.forEach(function(r){r.__cardAnimating;var d=r.scrollHeight,h=l(r);r.__cardAnimating=!0,r.style.transition=r.style.transition||"max-height 0.28s ease",i?(r.style.maxHeight=d+"px",requestAnimationFrame(function(){r.style.overflow="hidden",r.style.maxHeight="0px"}),r.addEventListener("transitionend",h)):(r.style.overflow="hidden",r.style.maxHeight="0px",requestAnimationFrame(function(){r.style.maxHeight=r.scrollHeight+"px"}),r.addEventListener("transitionend",h))}),n.classList.toggle("card-collapse")}catch{}});document.addEventListener("DOMContentLoaded",function(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)});try{document.querySelectorAll(".card.card-collapse").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.overflow="hidden",n.style.maxHeight="0px"})}),document.querySelectorAll(".card:not(.card-collapse)").forEach(function(t){t.querySelectorAll(".card-body").forEach(function(n){n.style.maxHeight="",n.style.overflow=""})})}catch{}});const re={TOAST_DELAY:5e3,ANIMATION_DURATION:220,DEBOUNCE_DELAY:300,PRINT_DELAY:250},x={isAvailable(){return typeof Swal<"u"&&typeof Swal.fire=="function"},showLoading(e,t=""){return this.isAvailable()?Swal.fire({title:e||window.i18n?.messages?.processing||"Processing...",text:t,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>Swal.showLoading()}):null},success(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"success",title:e,text:t,timer:n.timer||2500,timerProgressBar:!0,...n}):(alert(e),Promise.resolve({isConfirmed:!0}))},error(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:"error",title:e,text:t,confirmButtonText:window.i18n?.messages?.ok||"OK",...n}):(alert(e+(t?`
`+t:"")),Promise.resolve({isConfirmed:!0}))},confirm(e,t="",n={}){return this.isAvailable()?Swal.fire({icon:n.icon||"warning",title:e,text:t,showCancelButton:!0,confirmButtonColor:n.confirmButtonColor||"#3085d6",cancelButtonColor:n.cancelButtonColor||"#d33",confirmButtonText:n.confirmButtonText||window.i18n?.messages?.confirm||"Confirm",cancelButtonText:n.cancelButtonText||window.i18n?.messages?.cancel||"Cancel",...n}):Promise.resolve({isConfirmed:confirm(e+(t?`
`+t:""))})},toast(e,t="success",n={}){return this.isAvailable()?Swal.fire({icon:t,title:e,toast:!0,position:n.position||"top-end",showConfirmButton:!1,timer:n.timer||2500,timerProgressBar:!0,...n}):(console.log(`[${t}] ${e}`),Promise.resolve())},close(){this.isAvailable()&&Swal.close()}},M=function(){const e=document.querySelector('meta[name="recaptcha-site-key"]')?.getAttribute("content")||"";let t=null,n=0;function i(){return!!e&&typeof window.grecaptcha<"u"&&typeof window.grecaptcha.execute=="function"}function a(p=2500){return e?i()?Promise.resolve(!0):n&&Date.now()<n?Promise.resolve(!1):t||(t=new Promise(C=>{const y=Date.now();try{if(!document.querySelector('script[src*="www.google.com/recaptcha/api.js"]')){const _=document.createElement("script");_.src=`https://www.google.com/recaptcha/api.js?render=${encodeURIComponent(e)}`,_.async=!0,_.defer=!0,document.head.appendChild(_)}}catch{}const w=()=>{if(i())return C(!0);if(Date.now()-y>=p)return C(!1);setTimeout(w,80)};w()}).then(C=>(C||(n=Date.now()+3e4),C)).finally(()=>{i()||(t=null)}),t):Promise.resolve(!1)}function l(p){return String(p||"submit").trim().toLowerCase().replace(/-/g,"_").replace(/[^a-z_\/]/g,"_").replace(/_+/g,"_").replace(/\/+?/g,"/").replace(/^_+|_+$/g,"").replace(/\/_+/g,"/").replace(/_+\//g,"/").slice(0,80)||"submit"}function r(p){const y=String(p||"").split("?")[0].split("#")[0].split("/").filter(Boolean),w=[];for(let E=0;E<y.length;E++){const _=String(y[E]||"").trim();if(!_||E===0&&/^[a-z]{2}$/i.test(_)||/^\d+$/.test(_)||/^[0-9a-f]{8,}$/i.test(_))continue;let P=_.toLowerCase().replace(/-/g,"_").replace(/[^a-z_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");P&&w.push(P)}return w.join("/")}function d(p){if(!p)return"submit";const C=p.getAttribute("data-recaptcha-action");if(C)return l(C);if(p.id)return l("form_"+p.id);const y=p.action||window.location.pathname;try{const w=new URL(y,window.location.origin).pathname;return l(r(w))}catch{return"submit"}}function h(p,C="submit"){const y=String(C||"submit").trim().toLowerCase();try{const w=new URL(String(p||""),window.location.origin).pathname,E=r(w);return l(`${y}_${E||"submit"}`)}catch{return l(`${y}_submit`)}}async function g(p){if(!i()&&(!await a()||!i()))return null;const C=l(p);return await new Promise(y=>{try{window.grecaptcha.ready(()=>{window.grecaptcha.execute(e,{action:C}).then(w=>y(w)).catch(()=>y(null))})}catch{y(null)}})}function m(p){if(p){if(!p.querySelector('input[name="g-recaptcha-response"]')){const C=document.createElement("input");C.type="hidden",C.name="g-recaptcha-response",p.appendChild(C)}if(!p.querySelector('input[name="recaptcha_action"]')){const C=document.createElement("input");C.type="hidden",C.name="recaptcha_action",p.appendChild(C)}}}function L(p,C,y){m(p);const w=p.querySelector('input[name="g-recaptcha-response"]'),E=p.querySelector('input[name="recaptcha_action"]');w&&(w.value=C||""),E&&(E.value=l(y))}return{isAvailable:i,ensureLoaded:a,deriveAction:d,deriveActionFromUrl:h,execute:g,setOnForm:L,siteKey:e}}(),be=document.querySelector('meta[name="login-url"]')?.getAttribute("content")||"/login";if(typeof window.fetch=="function"&&!window.__fetchSessionWrapped){const e=window.fetch.bind(window);window.fetch=async(t,n=void 0)=>{try{const a=String(n&&n.method||(t instanceof Request?t.method:"GET")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(a)&&M&&M.siteKey){const l=t instanceof Request?t.url:String(t||""),r=new URL(l,window.location.href);if(r.origin===window.location.origin){const d=n&&n.headers?n.headers:t instanceof Request?t.headers:void 0,h=new Headers(d||{});if(!h.has("X-Recaptcha-Token")){const g=M.deriveActionFromUrl(r.href,a.toLowerCase()),m=await M.execute(g);m&&(h.set("X-Recaptcha-Token",m),n=Object.assign({},n||{},{headers:h}))}}}}catch{}const i=await e(t,n);if(i&&(i.status===401||i.status===419)){try{A.show(window.i18n?.messages?.session_expired_redirecting||window.i18n?.messages?.session_expired||"","warning")}catch{}setTimeout(()=>{window.location.href=be},500)}return i},window.__fetchSessionWrapped=!0}const A=function(){let e=null;const t=re.TOAST_DELAY;function n(){if(document.getElementById("ins-toast-styles"))return;const r=`
        .ins-toast-container{position:fixed;right:1rem;bottom:1rem;z-index:10850;display:flex;flex-direction:column;gap:0.5rem;max-width:360px;pointer-events:none}
        @media (max-width: 576px){.ins-toast-container{left:50%;right:auto;bottom:1rem;transform:translateX(-50%);max-width:92vw}}
        .ins-toast{pointer-events:auto;display:flex;align-items:center;gap:0.75rem;padding:0.6rem 0.75rem;border-radius:0.5rem;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.12);overflow:hidden;transform-origin:right center;transition:opacity .18s ease,transform .18s ease}
        .ins-toast .ins-body{flex:1;font-size:0.95rem}
        .ins-toast .ins-close{background:transparent;border:0;color:inherit;opacity:0.85;cursor:pointer}
        .ins-toast.info{background:linear-gradient(90deg,#0d6efd,#6f42c1)}
        .ins-toast.success{background:linear-gradient(90deg,#198754,#20c997)}
        .ins-toast.danger{background:linear-gradient(90deg,#dc3545,#e55353)}
        .ins-toast.warning{background:linear-gradient(90deg,#fd7e14,#ffc107)}
        .ins-toast .ins-progress{height:3px;background:rgba(255,255,255,0.85);width:100%;transform-origin:left center}
        `,d=document.createElement("style");d.id="ins-toast-styles",d.textContent=r,document.head.appendChild(d)}function i(){return e||(e=document.createElement("div"),e.className="ins-toast-container",document.body.appendChild(e),e)}function a(r){!r||!r.parentNode||(r.style.opacity="0",r.style.transform="translateY(8px)",r._timer&&(clearTimeout(r._timer),delete r._timer),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},re.ANIMATION_DURATION))}function l(r,d="info",h={}){if(!r)return null;n();const g=i(),m=h.delay||t,L=h.autoHide!==!1,p=document.createElement("div");p.className=`ins-toast ${d}`,p.setAttribute("role","status"),p.setAttribute("aria-live","polite"),p.innerHTML=`
            <div class="ins-body"></div>
            <button type="button" class="ins-close" aria-label="Close">&times;</button>
            <div class="ins-progress"></div>
        `;const C=p.querySelector(".ins-close"),y=p.querySelector(".ins-body"),w=p.querySelector(".ins-progress");return y&&(y.textContent=String(r)),C.addEventListener("click",()=>a(p)),g.appendChild(p),requestAnimationFrame(()=>{p.style.opacity="1",p.style.transform="translateY(0)"}),w&&L&&(w.style.width="100%",w.style.transition=`width ${m}ms linear`,requestAnimationFrame(()=>{w.style.width="0%"})),L?p._timer=setTimeout(()=>a(p),m):w&&(w.style.opacity="0.48"),p}return{show:l,hide:a}}();window.Toast||(window.Toast=A);const b={debounce(e,t=re.DEBOUNCE_DELAY){let n;return function(...i){clearTimeout(n),n=setTimeout(()=>e.apply(this,i),t)}},getCSRFToken(){return document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},stripHtml(e){if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},removeHtmlTags(e){return e?e.replace(/<[^>]*>/g,""):""},formatDate(e,t={}){if(!e)return"";const n=new Date(e),i=t.locale||"en-US",a=t.format||{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return n.toLocaleString(i,a)},safeJsonParse(e,t=null){try{return JSON.parse(e)}catch{return t}},escapeHtml(e){return(e==null?"":String(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},truncateWords(e,t=10){const n=e==null?"":String(e),i=n.trim().split(/\s+/).filter(Boolean);return i.length<=t?n.trim():`${i.slice(0,t).join(" ")}...`},getCssVar(e){const t=e.startsWith("--")?e:`--${e}`;return getComputedStyle(document.documentElement).getPropertyValue(t).trim()},colors:{get primary(){return b.getCssVar("--ins-primary")||"#428177"},get secondary(){return b.getCssVar("--ins-secondary")||"#054239"},get success(){return b.getCssVar("--ins-success")||"#22c55e"},get danger(){return b.getCssVar("--ins-danger")||"#ef4444"},get warning(){return b.getCssVar("--ins-warning")||"#eab308"},get info(){return b.getCssVar("--ins-info")||"#06b6d4"},get indigo(){return b.getCssVar("--ins-indigo")||"#6366f1"},get blue(){return b.getCssVar("--ins-blue")||"#3b82f6"},get teal(){return b.getCssVar("--ins-teal")||"#14b8a6"},get bodyColor(){return b.getCssVar("--ins-body-color")||"#374151"},get bodyBg(){return b.getCssVar("--ins-body-bg")||"#f9f9f9"},get white(){return b.getCssVar("--ins-white")||"#fff"},get black(){return b.getCssVar("--ins-black")||"#030712"},social:{get facebook(){return b.getCssVar("--ins-social-facebook")||"#1877F2"},get facebookGreen(){return b.getCssVar("--ins-social-facebook-green")||"#42B72A"},get facebookText(){return b.getCssVar("--ins-social-facebook-text")||"#050505"},get facebookSecondary(){return b.getCssVar("--ins-social-facebook-secondary")||"#65676B"},get facebookReaction(){return b.getCssVar("--ins-social-facebook-reaction")||"#F0284A"},get twitter(){return b.getCssVar("--ins-social-twitter")||"#1DA1F2"},get twitterBlue(){return b.getCssVar("--ins-social-twitter-blue")||"#1D9BF0"},get twitterBg(){return b.getCssVar("--ins-social-twitter-bg")||"#000000"},get twitterBorder(){return b.getCssVar("--ins-social-twitter-border")||"#2F3336"},get twitterText(){return b.getCssVar("--ins-social-twitter-text")||"#E7E9EA"},get twitterSecondary(){return b.getCssVar("--ins-social-twitter-secondary")||"#71767B"},get linkedin(){return b.getCssVar("--ins-social-linkedin")||"#0A66C2"},get linkedinDark(){return b.getCssVar("--ins-social-linkedin-dark")||"#004182"},get linkedinBg(){return b.getCssVar("--ins-social-linkedin-bg")||"#F4F2EE"},get linkedinReaction(){return b.getCssVar("--ins-social-linkedin-reaction")||"#E16745"},get linkedinCelebrate(){return b.getCssVar("--ins-social-linkedin-celebrate")||"#6DAE4F"},get instagram(){return b.getCssVar("--ins-social-instagram")||"#E4405F"},get instagramBlue(){return b.getCssVar("--ins-social-instagram-blue")||"#0095F6"},get instagramSecondary(){return b.getCssVar("--ins-social-instagram-secondary")||"#A8A8A8"},get instagramBorder(){return b.getCssVar("--ins-social-instagram-border")||"#262626"},get instagramLink(){return b.getCssVar("--ins-social-instagram-link")||"#E0F1FF"},get tiktokCyan(){return b.getCssVar("--ins-social-tiktok-cyan")||"#25F4EE"},get tiktokPink(){return b.getCssVar("--ins-social-tiktok-pink")||"#FE2C55"},get tiktokBlue(){return b.getCssVar("--ins-social-tiktok-blue")||"#20D5EC"}}}},$={fillForm(e,t){if(!e||!t||typeof t!="object")return;const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;Object.keys(t).forEach(a=>{const l=n.querySelector(`[name="${a}"]`);if(l)switch(l.type){case"checkbox":l.checked=!!t[a];break;case"radio":const r=n.querySelector(`[name="${a}"][value="${t[a]}"]`);r&&(r.checked=!0);break;default:l.value=t[a]||""}}),Object.entries({id:"editConfigTitleId",key:"key",page:"page",title:"title",description:"description",created_at:"created_at",updated_at:"updated_at"}).forEach(([a,l])=>{const r=n.querySelector(`#${l}`);r&&t[a]!==void 0&&(a.endsWith("_at")?r.value=b.formatDate(t[a]):r.value=t[a]||"")})},clearFormErrors(e){if(!e)return;const t=typeof e=="string"?document.querySelector(e):e;if(!t)return;[".is-invalid",".is-valid",".invalid-feedback",".valid-feedback"].forEach(i=>{t.querySelectorAll(i).forEach(a=>{i.startsWith(".is-")?a.classList.remove(i.substring(1)):a.remove()})}),t.querySelectorAll(".text-danger.error-message").forEach(i=>i.remove()),t.classList.remove("was-validated")},resetForm(e){e&&(e.reset(),this.clearFormErrors(e))},displayFormErrors(e,t){if(!e||!t||typeof t!="object")return;e.classList.add("was-validated");let n=null;Object.entries(t).forEach(([i,a])=>{const l=e.querySelector(`[name="${i}"]`)||e.querySelector(`#${i}`);if(!l)return;l.classList.add("is-invalid"),l.classList.remove("is-valid");const r=l.parentNode.querySelector(".invalid-feedback");r&&r.remove();const d=document.createElement("div");d.className="invalid-feedback d-block";const h=document.createElement("i");h.className="bi bi-exclamation-circle me-1";const g=document.createTextNode(Array.isArray(a)?a[0]:String(a));d.appendChild(h),d.appendChild(g),l.parentNode.appendChild(d),n||(n=l)}),n&&(n.focus(),n.scrollIntoView({behavior:"smooth",block:"center"}))},async handleFormSubmit(e,t){if(!e||!t)return;e.preventDefault(),this.clearFormErrors(t);const n=t.closest(".modal");let i=t.querySelector('button[type="submit"]');!i&&n&&(i=n.querySelector(".modal-footer .btn-primary")||n.querySelector('.modal-footer button[type="button"]:not(.btn-secondary)')||n.querySelector('button[type="submit"]')),i||(i=t.querySelector(".btn-primary"));const a=i?.innerHTML||"",l=i?.disabled||!1;if(i||console.warn("Submit button not found in form or modal"),i){i.disabled=!0;const d=window.i18n&&window.i18n.messages&&window.i18n.messages.processing?window.i18n.messages.processing:"";i.innerHTML='<i class="bi bi-hourglass-split"></i> '+d}const r=()=>{i&&(i.disabled=l,i.innerHTML=a)};try{const d=new FormData(t),h=t.action||window.location.href,g={"X-CSRF-TOKEN":b.getCSRFToken(),Accept:"application/json","X-Requested-With":"XMLHttpRequest"};if(M&&M.siteKey){const w=d.get("g-recaptcha-response"),E=d.get("recaptcha_action");if(!w||!E){const _=M.deriveAction(t),P=await M.execute(_);P&&(d.set("g-recaptcha-response",P),d.set("recaptcha_action",_),g["X-Recaptcha-Token"]=P)}else g["X-Recaptcha-Token"]=String(w)}const m=new AbortController,L=setTimeout(()=>m.abort(),3e4),p=await fetch(h,{method:"POST",body:d,signal:m.signal,credentials:"same-origin",headers:g});clearTimeout(L);const C=(p.headers.get("content-type")||"").toLowerCase();let y=null;if(C.includes("application/json")){try{y=await p.json()}catch{throw new Error(window.i18n?.messages?.invalid_server_response||"")}const w=y&&y.success===!1;if(p.ok&&!w){const E=y.message||window.i18n?.messages?.operation_completed_successfully||"";if(y.redirect){sessionStorage.setItem("toastMessage",JSON.stringify({message:E,type:"success"})),window.location.href=y.redirect;return}r(),A.show(E,"success"),n&&ee.hide(n),window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload()}else{if(y&&y.errors&&(r(),this.displayFormErrors(t,y.errors)),y&&y.redirect){y.message&&sessionStorage.setItem("toastMessage",JSON.stringify({message:y.message,type:p.status>=500?"danger":"warning"})),window.location.href=y.redirect;return}if(y&&y.message&&(r(),A.show(y.message,p.status>=500?"danger":"warning")),p.status===403){A.show(window.i18n?.messages?.not_authorized||"","warning"),setTimeout(()=>{window.location.href=be},600);return}if(y&&(y.errors||y.message||y.redirect))return;r();const E=y&&(y.message||y.error)||window.i18n?.messages?.operation_failed||"";throw new Error(E)}}else{if(p.redirected){window.location.href=p.url;return}const w=await p.text();if(p.ok){if(w&&(w.includes("<!DOCTYPE html")||w.includes("<html"))){document.open(),document.write(w),document.close();return}window.location.reload();return}throw r(),new Error(window.i18n?.messages?.unexpected_response||"")}}catch(d){console.error("Form submission error:",d),r(),d.name==="AbortError"?A.show(window.i18n?.messages?.request_timeout||"","danger"):A.show(d.message||window.i18n?.messages?.an_error_occurred||"","danger")}}},ee={show(e){if(!e)return;e.style.display="block",e.classList.add("show","in"),e.classList.remove("out"),document.body.classList.add("modal-open");const t=document.createElement("div");t.className="modal-backdrop fade show",t.id=`modal-backdrop-${Date.now()}`,document.body.appendChild(t);const n=i=>{i.key==="Escape"&&(this.hide(e),document.removeEventListener("keydown",n))};document.addEventListener("keydown",n),t.addEventListener("click",()=>this.hide(e)),e._cleanup=()=>{document.removeEventListener("keydown",n)}},hide(e){e&&(e.style.display="none",e.classList.remove("show","in"),e.classList.add("out"),document.body.classList.remove("modal-open"),document.querySelectorAll(".modal-backdrop").forEach(t=>t.remove()),e._cleanup&&(e._cleanup(),delete e._cleanup))}},O={currentDataTable:null,setCurrentDataTable(e){this.currentDataTable=e,window.currentDataTable=e},getCurrentDataTable(){return this.currentDataTable},initializeColumnVisibility(e=".dataTable",t=".column-toggle"){document.querySelector(e)&&(document.querySelectorAll(t).forEach(i=>{i.addEventListener("change",()=>{this.currentDataTable&&this.currentDataTable.column(parseInt(i.dataset.column)).visible(i.checked),this.updateColumnCount(t)})}),this.updateColumnCount(t))},toggleAllColumns(e,t=".column-toggle"){document.querySelectorAll(t).forEach(n=>{n.checked=e,this.currentDataTable&&this.currentDataTable.column(parseInt(n.dataset.column)).visible(e)}),this.updateColumnCount(t)},updateColumnCount(e=".column-toggle",t="column-count"){const n=document.querySelectorAll(e),i=Array.from(n).filter(r=>r.checked).length,a=n.length,l=document.getElementById(t);l&&(l.textContent=`${i} of ${a} columns visible`)},exportTableToCSV(e=".dataTable",t="export.csv",n=!0){const i=document.querySelector(e);if(!i){console.error("Table not found");return}const l=this.extractTableData(i,n).map(r=>r.map(d=>`"${String(d).replace(/"/g,'""')}"`).join(",")).join(`
`);this.downloadFile(l,t,"text/csv;charset=utf-8;"),A.show(window.i18n?.messages?.table_export_success||"","success")},copyTableToClipboard(e=".dataTable",t=!0){const n=document.querySelector(e);if(!n){console.error("Table not found");return}const a=this.extractTableData(n,t).map(l=>l.join("	")).join(`
`);navigator.clipboard.writeText(a).then(()=>{A.show(window.i18n?.messages?.table_copy_success||"","success")}).catch(l=>{console.error("Failed to copy to clipboard:",l),A.show(window.i18n?.messages?.table_copy_failed||"","danger")})},printTable(e=".dataTable",t=null,n=!0){const i=document.querySelector(e);if(!i){console.error("Table not found");return}const a=t||window.i18n?.messages?.data_export||"",l=window.i18n?.messages?.generated_on||"",r=this.extractTableData(i,n),d=this.generatePrintableTable(r),h=window.open("","_blank");h.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>${a}</title>
                <meta charset="utf-8">
                <style>
                    body { font-family: Arial, sans-serif; margin: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; font-weight: bold; }
                    tr:nth-child(even) { background-color: #f9f9f9; }
                    tr:hover { background-color: #f5f5f5; }
                    @media print {
                        .no-print { display: none; }
                        body { margin: 0; }
                        table { page-break-inside: auto; }
                        tr { page-break-inside: avoid; page-break-after: auto; }
                        th { page-break-after: avoid; }
                    }
                    @page { margin: 1cm; }
                </style>
            </head>
            <body>
                <h2>${a}</h2>
                <p style="color: #666; font-size: 12px; margin-bottom: 20px;">
                    ${l} ${new Date().toLocaleString()}
                </p>
                ${d}
            </body>
            </html>
        `),h.document.close(),h.focus(),setTimeout(()=>{h.print()},re.PRINT_DELAY),A.show(window.i18n?.messages?.print_dialog_opened||"","info")},extractTableData(e,t){const n=[],i=[];return e.querySelectorAll("thead th").forEach((r,d)=>{(!t||!this.currentDataTable||this.currentDataTable.column(d).visible())&&i.push(b.stripHtml(r.textContent.trim()))}),n.push(i),e.querySelectorAll("tbody tr").forEach(r=>{const d=[];r.querySelectorAll("td").forEach((g,m)=>{(!t||!this.currentDataTable||this.currentDataTable.column(m).visible())&&d.push(b.stripHtml(g.textContent.trim()))}),d.length>0&&n.push(d)}),n},generatePrintableTable(e){if(!e.length)return`<p>${window.i18n?.messages?.no_data_to_display||""}</p>`;const[t,...n]=e,i=t.map(l=>`<th>${l}</th>`).join(""),a=n.map(l=>`<tr>${l.map(r=>`<td>${r}</td>`).join("")}</tr>`).join("");return`
            <table>
                <thead><tr>${i}</tr></thead>
                <tbody>${a}</tbody>
            </table>
        `},downloadFile(e,t,n){const i=new Blob([e],{type:n}),a=URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}},Y={initializeDropdownBehavior(e=".dropdown-menu"){document.querySelectorAll(e).forEach(t=>{t.addEventListener("click",n=>{t.querySelector(".column-toggle")&&n.stopPropagation()})})},bindPasswordToggle(e=null,t=null){if(e&&t){const r=document.querySelector(e),d=document.querySelector(t);r&&d&&this.setupPasswordToggle(r,d);return}const n=document.querySelectorAll(".input-group");let i=!1;if(n.forEach(r=>{const d=r.querySelector("input[type='password']"),h=r.querySelector("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");d&&h&&(this.setupPasswordToggle(h,d),i=!0)}),i)return;const a=document.querySelectorAll("input[type='password']"),l=document.querySelectorAll("button.togglePassword, .togglePassword.btn, .togglePassword[type='button']");!l.length||!a.length||(a.length===1&&l.length===1?this.setupPasswordToggle(l[0],a[0]):a.forEach((r,d)=>{const h=l[d];h&&this.setupPasswordToggle(h,r)}))},setupPasswordToggle(e,t){e.__passwordToggleBound||(e.__passwordToggleBound=!0,e.addEventListener("click",()=>{const n=t.type==="password";t.type=n?"text":"password",typeof e.innerHTML<"u"&&(e.innerHTML=n?'<i class="bi bi-eye-slash"></i>':'<i class="bi bi-eye"></i>')}))}},j={async deleteItem(e,t={}){const{onSuccess:n,onError:i,successMessage:a=window.i18n?.toasts?.delete_success||"",errorMessage:l=window.i18n?.toasts?.delete_failed||"",headers:r={},redirectOnSuccess:d=!1,redirectUrl:h=null}=t;if(!e)return console.error("deleteItem: resourceUrl is required"),!1;try{const g=Object.assign({"X-CSRF-TOKEN":b.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},r);if(M&&M.siteKey){const w=M.deriveActionFromUrl(e,"delete"),E=await M.execute(w);E&&(g["X-Recaptcha-Token"]=E)}const m=await fetch(e,{method:"DELETE",credentials:"same-origin",headers:g});let L=null;const p=(m.headers.get("content-type")||"").toLowerCase(),C=m.redirected===!0,y=m.url||null;if(p.includes("application/json"))try{L=await m.json()}catch{}if(m.ok){if(C&&y)return window.location.href=y,!0;if(L&&L.redirect)return window.location.href=L.redirect,!0;if(d&&h)return window.location.href=h,!0;if(A.show(L&&L.message||a,"success"),typeof n=="function")try{n(L)}catch(w){console.warn("onSuccess error:",w)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}else{const w=new Error(L&&L.message||l);if(typeof i=="function")try{i(w,m)}catch(E){console.warn("onError error:",E)}return A.show(w.message,"danger"),!1}}catch(g){if(console.error("deleteItem error:",g),A.show(g.message||l,"danger"),typeof i=="function")try{i(g)}catch(m){console.warn("onError error:",m)}return!1}},async confirmDelete(e,t=null,n=null,i=null){const a=document.getElementById("confirmModal"),l=document.getElementById("confirmMessage"),r=document.getElementById("confirmDeleteBtn");if(a&&l&&r){l.textContent=(n.confirm.message||"").replace(":item",i);const d=r.cloneNode(!0);r.parentNode.replaceChild(d,r),d.addEventListener("click",function(){hideModal(a),window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed})}),showModal(a)}else window.confirm&&window.confirm((n.confirm.message||"").replace(":item",e.title||e.key))?window.deleteItem(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed}):console.error("Confirmation modal not found and confirm() not available")},async activationStatus(e,t={}){const{onSuccess:n,onError:i,successMessage:a=window.i18n?.toasts?.activate_success||"",errorMessage:l=window.i18n?.toasts?.activate_failed||"",headers:r={},action:d=null,redirectOnSuccess:h=!1,redirectUrl:g=null}=t;if(!e)return console.error("activationStatus: resourceUrl is required"),!1;if(!d)return console.error("activationStatus: action is required (activate|deactivate)"),!1;try{const m=Object.assign({"X-CSRF-TOKEN":b.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},r),L={action:d};if(M&&M.siteKey){const _=M.deriveActionFromUrl(e,"post"),P=await M.execute(_);P&&(m["X-Recaptcha-Token"]=P,L["g-recaptcha-response"]=P,L.recaptcha_action=_)}const p=await fetch(e,{method:"POST",credentials:"same-origin",headers:m,body:JSON.stringify(L)});let C=null;const y=(p.headers.get("content-type")||"").toLowerCase(),w=p.redirected===!0,E=p.url||null;if(y.includes("application/json"))try{C=await p.json()}catch{}if(p.ok){if(w&&E)return window.location.href=E,!0;if(C&&C.redirect)return window.location.href=C.redirect,!0;if(h&&g)return window.location.href=g,!0;if(A.show(C&&C.message||a,"success"),typeof n=="function")try{n(C)}catch(_){console.warn("onSuccess error:",_)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}else{const _=new Error(C&&C.message||l);if(typeof i=="function")try{i(_,p)}catch(P){console.warn("onError error:",P)}return A.show(_.message,"danger"),!1}}catch(m){if(console.error("activationStatus error:",m),A.show(m.message||l,"danger"),typeof i=="function")try{i(m)}catch(L){console.warn("onError error:",L)}return!1}},async requestJson(e,t={}){const{method:n="POST",data:i=null,headers:a={},onSuccess:l,onError:r,successMessage:d=window.i18n?.messages?.operation_completed_successfully||"",errorMessage:h=window.i18n?.messages?.operation_failed||"",redirectOnSuccess:g=!1,redirectUrl:m=null,showSuccessToast:L=!0,showErrorToast:p=!0}=t;if(!e)return console.error("requestJson: resourceUrl is required"),!1;try{const C=String(n||"POST").toUpperCase(),y=Object.assign({"X-CSRF-TOKEN":b.getCSRFToken(),"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},a);let w=i===null||typeof i>"u"?null:i;if(M&&M.siteKey&&["POST","PUT","PATCH","DELETE"].includes(C)){const B=M.deriveActionFromUrl(e,C.toLowerCase()),X=await M.execute(B);X&&(y["X-Recaptcha-Token"]=X,w&&typeof w=="object"&&(w=Object.assign({},w,{"g-recaptcha-response":X,recaptcha_action:B})))}const E=await fetch(e,{method:C,credentials:"same-origin",headers:y,body:w===null?null:JSON.stringify(w)});let _=null;const P=(E.headers.get("content-type")||"").toLowerCase(),W=E.redirected===!0,U=E.url||null;if(P.includes("application/json"))try{_=await E.json()}catch{}const Z=_&&_.success===!1;if(E.ok&&!Z){if(W&&U)return window.location.href=U,!0;if(_&&_.redirect)return window.location.href=_.redirect,!0;if(g&&m)return window.location.href=m,!0;if(L&&A.show(_&&_.message||d,"success"),typeof l=="function")try{l(_,E)}catch(B){console.warn("onSuccess error:",B)}return window.currentDataTable?.ajax?.reload&&window.currentDataTable.ajax.reload(),!0}const H=new Error(_&&(_.message||_.error)||h);if(typeof r=="function")try{r(H,E,_)}catch(B){console.warn("onError error:",B)}return p&&A.show(H.message,E.status>=500?"danger":"warning"),!1}catch(C){if(console.error("requestJson error:",C),typeof r=="function")try{r(C)}catch(y){console.warn("onError error:",y)}return p&&A.show(C.message||h,"danger"),!1}},bindSelectJsonUpdate(e={}){const{selector:t="[data-update-url]",urlAttr:n="data-update-url",method:i="PUT",valueKey:a="status",prevValueDatasetKey:l="prevValue",disableDuringRequest:r=!0,idAttr:d=null,badgeAttr:h=null,renderBadge:g=null,successMessage:m=window.i18n?.toasts?.status_updated||window.i18n?.messages?.operation_completed_successfully||"",errorMessage:L=window.i18n?.toasts?.status_update_failed||window.i18n?.messages?.operation_failed||"",showSuccessToast:p=!0,showErrorToast:C=!0,buildData:y=null,onSuccess:w=null,onError:E=null}=e;document.querySelectorAll(t).forEach(_=>{!_||_.tagName!=="SELECT"||_.__crudSelectJsonUpdateBound||(_.__crudSelectJsonUpdateBound=!0,_.dataset[l]=String(_.value||""),_.addEventListener("change",async function(){const P=this.getAttribute(n),W=String(this.value||""),U=String(this.dataset[l]||"");if(W===U)return;if(!P){this.value=U;return}const Z=typeof y=="function"?y(this):{[a]:W},H=this.disabled;r&&(this.disabled=!0);let B=null;if(d&&h){const z=this.getAttribute(d);z&&(B=document.querySelector(`[${h}="${z}"]`))}await j.requestJson(P,{method:i,data:Z,successMessage:m,errorMessage:L,showSuccessToast:p,showErrorToast:C,onSuccess:(z,k)=>{if(this.dataset[l]=W,B&&typeof g=="function")try{B.textContent=String(g(W,this,z,k)||"")}catch{}if(typeof w=="function")try{w(this,z,k)}catch(V){console.warn("onSuccess hook failed:",V)}},onError:(z,k,V)=>{if(typeof E=="function")try{E(this,z,k,V)}catch(ne){console.warn("onError hook failed:",ne)}}})||(this.value=U),r&&(this.disabled=H)}))})},bindStatusSelect(e={},t=null,n=null){if(typeof e=="string"){const i=e,a=typeof t=="function"?t:null,l=n||window.i18n||{};return this.bindSelectJsonUpdate({selector:i,urlAttr:"data-update-url",method:"PUT",valueKey:"status",idAttr:"data-status-id",badgeAttr:"data-status-badge",renderBadge:a,successMessage:l?.toasts?.status_updated||l?.messages?.operation_completed_successfully,errorMessage:l?.toasts?.status_update_failed||l?.messages?.operation_failed,showSuccessToast:!0,showErrorToast:!0})}return this.bindSelectJsonUpdate(e||{})},async confirmActivate(e,t=null,n=null){const i=document.getElementById("confirmActivateModal"),a=document.getElementById("confirmActivateMessage"),l=document.getElementById("confirmActivateBtn");if(i&&a&&l){a.textContent=(n.confirm.message||"").replace(":item",e.title||e.key);const r=l.cloneNode(!0);l.parentNode.replaceChild(r,l),r.addEventListener("click",function(){hideModal(i),window.activationStatus(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed})}),showModal(i)}else window.confirm&&window.confirm((n.confirm.message||"").replace(":item",e.title||e.key))?window.activationStatus(t,{successMessage:n.toasts.delete_success,errorMessage:n.toasts.delete_failed}):console.error("Confirmation modal not found and confirm() not available")}};Object.assign(window,{Toast:A,showToast:(e,t,n)=>A.show(e,t,n),fillForm:$.fillForm.bind($),clearFormErrors:$.clearFormErrors.bind($),resetForm:$.resetForm.bind($),displayFormErrors:$.displayFormErrors.bind($),handleFormSubmit:$.handleFormSubmit.bind($),showModal:ee.show.bind(ee),hideModal:ee.hide.bind(ee),initializeColumnVisibility:O.initializeColumnVisibility.bind(O),toggleAllColumns:O.toggleAllColumns.bind(O),updateColumnCount:O.updateColumnCount.bind(O),exportTableToCSV:O.exportTableToCSV.bind(O),copyTableToClipboard:O.copyTableToClipboard.bind(O),printTable:O.printTable.bind(O),setCurrentDataTable:O.setCurrentDataTable.bind(O),getCurrentDataTable:O.getCurrentDataTable.bind(O),initializeDropdownBehavior:Y.initializeDropdownBehavior.bind(Y),bindPasswordToggle:Y.bindPasswordToggle.bind(Y),Utils:b,SwalHelper:x,stripHtml:b.stripHtml,removeHtmlTags:b.removeHtmlTags,escapeHtml:b.escapeHtml,truncateWords:b.truncateWords,safeJsonParse:b.safeJsonParse,getCSRFToken:b.getCSRFToken,deleteItem:j.deleteItem.bind(j),confirmDelete:j.confirmDelete?j.confirmDelete.bind(j):void 0,activationStatus:j.activationStatus.bind(j),requestJson:j.requestJson.bind(j),bindSelectJsonUpdate:j.bindSelectJsonUpdate.bind(j),bindStatusSelect:j.bindStatusSelect.bind(j)});window.confirmActivate=function(e={},t=null,n=null){let i={};if(e&&(e.itemLabel||e.resourceUrl||e.action||e.message||e.confirmText))i=Object.assign({},e);else{const d=e||{},h=n||window.i18n||{};i={itemLabel:d.title||d.key||d.full_name||d.name||"",resourceUrl:t||d.url||"",action:typeof d.active<"u"&&d.active?"deactivate":"activate",confirmText:null,confirmClass:null,message:h.confirm&&h.confirm.message?h.confirm.message:null,successMessage:h.toasts?.activate_success||null,errorMessage:h.toasts?.activate_failed||null,onSuccess:null,onError:null,redirectOnSuccess:!1,redirectUrl:null}}const a=document.getElementById("confirmActivateModal"),l=document.getElementById("confirmActivateMessage"),r=document.getElementById("confirmActivateBtn");if(!i.resourceUrl){console.error("confirmActivate: resourceUrl is required");return}if(a&&l&&r){const d=i.message||window.i18n?.confirm?.activate_message||window.i18n?.confirm?.message||"";l.textContent=d.replace(":item",i.itemLabel||"");const h=r.cloneNode(!0);i.confirmText&&(h.textContent=i.confirmText),i.confirmClass&&(h.className=i.confirmClass),r.parentNode.replaceChild(h,r),h.addEventListener("click",function(){try{hideModal(a)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(a)?.hide()}catch{}}window.activationStatus(i.resourceUrl,{action:i.action,successMessage:i.successMessage,errorMessage:i.errorMessage,onSuccess:i.onSuccess,onError:i.onError,redirectOnSuccess:i.redirectOnSuccess,redirectUrl:i.redirectUrl})});try{showModal(a)}catch{try{window.bootstrap?.Modal?.getOrCreateInstance(a)?.show()}catch{}}}else window.activationStatus(i.resourceUrl,{action:i.action,successMessage:i.successMessage,errorMessage:i.errorMessage,onSuccess:i.onSuccess,onError:i.onError,redirectOnSuccess:i.redirectOnSuccess,redirectUrl:i.redirectUrl})};window.clearForm||(window.clearForm=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&(t.querySelectorAll("input.form-control, textarea.form-control").forEach(n=>{n.type==="checkbox"||n.type==="radio"?n.checked=!1:n.value=""}),t.querySelectorAll("select").forEach(n=>{Array.from(n.options).forEach(i=>{i.selected=!1}),n._choices&&n._choices.removeActiveItems(),n.dispatchEvent(new Event("change",{bubbles:!0}))}))});window.clearErrors||(window.clearErrors=function(e){const t=typeof e=="string"?document.querySelector(e):e;t&&t.querySelectorAll(".error").forEach(n=>n.remove())});window.handleSubmit||(window.handleSubmit=function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;n&&(n.__handleSubmitBound||(n.__handleSubmitBound=!0,n.addEventListener("submit",function(i){i.stopImmediatePropagation();try{$.handleFormSubmit(i,n)}catch(a){console.error("handleSubmit error:",a),A.show(a?.message||window.i18n?.messages?.an_error_occurred||"","danger")}},!0)))});window.__recaptchaGlobalSubmitListenerAdded||(window.__recaptchaGlobalSubmitListenerAdded=!0,document.addEventListener("submit",async function(e){const t=e.target;if(!t||t.tagName!=="FORM"||t.__handleSubmitBound||t.dataset&&t.dataset.recaptchaSkip==="1"||t.dataset&&t.dataset.submitNative==="1"||t.__recaptchaSubmitInProgress)return;const n=String(t.getAttribute("method")||"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(n)){e.preventDefault(),t.__recaptchaSubmitInProgress=!0;try{await $.handleFormSubmit(e,t)}catch(i){console.error("Global submit handler error:",i)}finally{t.__recaptchaSubmitInProgress=!1}}},!0));document.addEventListener("DOMContentLoaded",()=>{try{Y.bindPasswordToggle(),Y.initializeDropdownBehavior();const e=sessionStorage.getItem("toastMessage");if(e){try{const{message:t,type:n}=JSON.parse(e);t&&A.show(t,n||"info")}catch(t){console.warn("Failed to parse stored toast:",t)}sessionStorage.removeItem("toastMessage")}}catch(e){console.warn("Auto-initialization warning:",e)}});document.addEventListener("click",function(e){if(e.target.matches('[data-bs-dismiss="modal"]')||e.target.closest('[data-bs-dismiss="modal"]')){const t=e.target.closest(".modal");t&&hideModal(t)}});(function(){async function t(){if(!window.loadChoices)return;const n=await window.loadChoices();document.querySelectorAll("select.select2, select[data-choices]").forEach(a=>{if(a._choices)return;const l=window.i18n&&window.i18n.messages&&window.i18n.messages.select_an_option||null,r=a.getAttribute("data-placeholder")||a.getAttribute("placeholder")||null,d=l||r||(document.documentElement.lang==="ar"?"اختر خيارًا":window.i18n?.messages?.select_an_option||"Select an option");try{const h=new n(a,{removeItemButton:a.multiple,shouldSort:!1,placeholder:!0,placeholderValue:d,searchEnabled:!0});a._choices=h}catch(h){console.warn("Choices initialization skipped or failed:",h)}})}document.addEventListener("DOMContentLoaded",()=>{t().catch(()=>null),setTimeout(()=>{t().catch(()=>null)},400)})})();async function Re(e,t=null,n={}){const{successText:i='<i class="bi bi-check me-1"></i>Copied!',successClass:a="btn-success",originalClass:l="btn-outline-secondary",timeout:r=2e3}=n;try{if(navigator.clipboard)await navigator.clipboard.writeText(e);else{const d=document.createElement("textarea");d.value=e,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d)}if(t){const d=t.innerHTML;t.innerHTML=i,t.classList.add(a),t.classList.remove(l),setTimeout(()=>{t.innerHTML=d,t.classList.remove(a),t.classList.add(l)},r)}return!0}catch(d){return console.error("Copy failed:",d),!1}}Object.assign(window,{copyToClipboard:Re});window.ContentManager={copyContent:function(e="content-output",t="Content copied successfully!"){const n=document.getElementById(e);if(!n){console.error(`Element with ID "${e}" not found`);return}const i=n.innerText||n.textContent;navigator.clipboard.writeText(i).then(function(){x.toast(t,"success",{background:"#d1e7dd",iconColor:"#0f5132"})}).catch(function(a){console.error("Copy failed:",a),x.toast(window.i18n?.messages?.copy_failed||"Copy failed","error")})},downloadContent:function(e="content-output",t="generated-content.txt"){const n=document.getElementById(e);if(!n){console.error(`Element with ID "${e}" not found`);return}const i=n.innerText||n.textContent,a=new Blob([i],{type:"text/plain"}),l=window.URL.createObjectURL(a),r=document.createElement("a");r.href=l,r.download=t,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(l),document.body.removeChild(r)},toggleFavorite:function(e,t,n={}){const i=e.dataset.contentId;e.dataset.isFavorited,e.disabled=!0,e.style.opacity="0.7";const a=e.querySelector("i"),l=e.querySelector(".favorite-text"),r=a.className,d=l.textContent;a.style.transition="transform 0.3s ease",a.style.transform="scale(1.3)",a.className="bi bi-heart-pulse me-1",setTimeout(()=>{a.style.transform="scale(1)"},300),fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"},body:JSON.stringify({content_id:i})}).then(h=>h.json()).then(h=>{if(h.success){const g=h.is_favorited;e.dataset.isFavorited=g,a.style.transform="scale(1.5)",setTimeout(()=>{a.className=g?"bi bi-heart-fill me-1":"bi bi-heart me-1",l.textContent=g?n.unfavorite||window.i18n?.messages?.unfavorite||"Remove from Favorites":n.favorite||window.i18n?.messages?.favorite||"Add to Favorites",a.style.transform="scale(1)"},200),g?(e.classList.remove("btn-outline-danger"),e.classList.add("btn-danger")):(e.classList.remove("btn-danger"),e.classList.add("btn-outline-danger")),x.toast(h.message,"success")}else throw new Error(h.message||window.i18n?.messages?.failed_to_toggle_favorite||"Failed to toggle favorite")}).catch(h=>{console.error("Error:",h),a.className=r,l.textContent=d,x.toast(n.error||window.i18n?.messages?.failed_to_update_favorite_status||"Failed to update favorite status","error",{timer:3e3})}).finally(()=>{e.disabled=!1,e.style.opacity="1"})}};window.SeoManager={analyzeSeo:function(e,t,n,i){x.showLoading(window.i18n?.messages?.analyzing_seo||"Analyzing SEO...",window.i18n?.messages?.analyzing_seo_text||"Please wait while we analyze your content."),fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":b.getCSRFToken(),Accept:"application/json"},body:JSON.stringify({focus_keyword:t,meta_description:n})}).then(a=>a.json()).then(a=>{x.close(),a.success?i&&i(a.data):x.error(window.i18n?.messages?.seo_analysis_failed||"SEO Analysis Failed",a.message||window.i18n?.messages?.failed_to_analyze_seo||"Failed to analyze SEO")}).catch(a=>{console.error("Error:",a),x.error(window.i18n?.messages?.error||"Error",window.i18n?.messages?.network_error||"Network error occurred")})},getScoreColor:function(e){return e>=80?"success":e>=60?"warning":"danger"},getGradeClass:function(e){return{A:"text-success",B:"text-info",C:"text-warning",D:"text-danger",F:"text-danger"}[e]||"text-secondary"},displayResults:function(e,t="seoResults"){const n=document.getElementById(t);if(!n)return;const i=e.breakdown||{},a=e.recommendations||[],l=document.getElementById("overallScore");l&&(l.textContent=Math.round(e.overall_score),l.className=`display-4 fw-bold text-${this.getScoreColor(e.overall_score)}`);const r=document.getElementById("seoGrade");r&&(r.textContent=e.grade,r.className=`badge bg-${this.getScoreColor(e.overall_score)} fs-4`),Object.keys(i).forEach(h=>{const g=i[h],m=document.querySelector(`[data-category="${h}"]`);m&&(m.style.width=g+"%",m.className=`progress-bar bg-${this.getScoreColor(g)}`,m.setAttribute("aria-valuenow",g),m.textContent=Math.round(g)+"%")});const d=document.getElementById("recommendationsList");d&&a.length>0&&(d.innerHTML=a.map(h=>`
                <div class="alert alert-info d-flex align-items-start">
                    <i class="bi bi-lightbulb-fill me-2 fs-5"></i>
                    <div>${h}</div>
                </div>
            `).join("")),n.style.display="block"},resetAnalysis:function(e="seoResults"){const t=document.getElementById(e);t&&(t.style.display="none")}};window.SocialManager={currentPreviewData:{},loadPreview:function(e,t){const n=document.getElementById("previewContent");n&&(n.innerHTML=`
            <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3">Generating ${e} preview...</p>
            </div>
        `,fetch(t,{headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(i=>i.json()).then(i=>{if(i.success)this.currentPreviewData=i.preview,this.renderPreview(i.preview);else throw new Error(i.message||window.i18n?.messages?.failed_to_load_preview||"Failed to load preview")}).catch(i=>{console.error("Error loading preview:",i),n.innerHTML=`
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    ${window.i18n?.messages?.failed_to_load_preview_text||"Failed to load preview. Please try again."}
                </div>
            `}))},renderPreview:function(e){const t=document.getElementById("previewContent");if(!t)return;let n="";e.platform==="twitter"?n=this.renderTwitterPreview(e):e.platform==="facebook"?n=this.renderFacebookPreview(e):e.platform==="linkedin"?n=this.renderLinkedInPreview(e):e.platform==="instagram"&&(n=this.renderInstagramPreview(e)),t.innerHTML=n},renderTwitterPreview:function(e){return`
            <div class="card border-0 shadow-sm" style="max-width: 500px; margin: 0 auto;">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" 
                             style="width: 48px; height: 48px;">
                            <i class="bi bi-person-fill text-white fs-4"></i>
                        </div>
                        <div class="ms-3">
                            <div class="fw-bold">Your Profile</div>
                            <div class="text-muted small">@username</div>
                        </div>
                    </div>
                    <div class="mb-3">${e.text||""}</div>
                    <div class="text-muted small">
                        <i class="bi bi-chat me-3"></i>
                        <i class="bi bi-repeat me-3"></i>
                        <i class="bi bi-heart me-3"></i>
                        <i class="bi bi-share"></i>
                    </div>
                </div>
            </div>
        `},renderFacebookPreview:function(e){return`
            <div class="card border-0 shadow-sm" style="max-width: 500px; margin: 0 auto;">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" 
                             style="width: 40px; height: 40px;">
                            <i class="bi bi-person-fill text-white"></i>
                        </div>
                        <div class="ms-2">
                            <div class="fw-bold small">Your Profile</div>
                            <div class="text-muted" style="font-size: 12px;">Just now · 🌍</div>
                        </div>
                    </div>
                    <div class="mb-3">${e.text||""}</div>
                    <div class="border-top pt-2 d-flex justify-content-around text-muted small">
                        <div><i class="bi bi-hand-thumbs-up me-1"></i> Like</div>
                        <div><i class="bi bi-chat me-1"></i> Comment</div>
                        <div><i class="bi bi-share me-1"></i> Share</div>
                    </div>
                </div>
            </div>
        `},renderLinkedInPreview:function(e){return`
            <div class="card border-0 shadow-sm" style="max-width: 550px; margin: 0 auto;">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" 
                             style="width: 48px; height: 48px;">
                            <i class="bi bi-person-fill text-white fs-4"></i>
                        </div>
                        <div class="ms-3">
                            <div class="fw-bold">Your Name</div>
                            <div class="text-muted small">Your Title · 1m</div>
                        </div>
                    </div>
                    <div class="mb-3">${e.text||""}</div>
                    <div class="border-top pt-2">
                        <div class="d-flex justify-content-around text-muted small">
                            <div><i class="bi bi-hand-thumbs-up me-1"></i> Like</div>
                            <div><i class="bi bi-chat-text me-1"></i> Comment</div>
                            <div><i class="bi bi-repeat me-1"></i> Repost</div>
                            <div><i class="bi bi-send me-1"></i> Send</div>
                        </div>
                    </div>
                </div>
            </div>
        `},renderInstagramPreview:function(e){return`
            <div class="card border-0 shadow-sm" style="max-width: 400px; margin: 0 auto;">
                <div class="card-header bg-white border-0">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center">
                            <div class="bg-gradient rounded-circle d-flex align-items-center justify-content-center" 
                                 style="width: 32px; height: 32px; background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);">
                                <i class="bi bi-person-fill text-white"></i>
                            </div>
                            <div class="ms-2 fw-bold small">your_username</div>
                        </div>
                        <i class="bi bi-three-dots"></i>
                    </div>
                </div>
                <div class="card-body p-0">
                    <div class="bg-light" style="height: 400px; display: flex; align-items-center; justify-content-center;">
                        <i class="bi bi-image text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <div class="p-3">
                        <div class="d-flex justify-content-between mb-2">
                            <div>
                                <i class="bi bi-heart me-3 fs-5"></i>
                                <i class="bi bi-chat me-3 fs-5"></i>
                                <i class="bi bi-send fs-5"></i>
                            </div>
                            <i class="bi bi-bookmark fs-5"></i>
                        </div>
                        <div class="small">
                            <span class="fw-bold">your_username</span> ${e.text||""}
                        </div>
                    </div>
                </div>
            </div>
        `},copySocialPreview:function(e){const t=this.currentPreviewData.text||"";if(!t){x.toast(window.i18n?.messages?.no_content_to_copy||"No content to copy","warning");return}navigator.clipboard.writeText(t).then(function(){x.toast(`${e} content copied!`,"success")}).catch(function(n){console.error("Copy failed:",n)})}};window.RefinementManager={applyRefinement:function(e,t,n){x.showLoading(window.i18n?.messages?.processing||"Processing...",`Applying ${e} refinement...`),fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":b.getCSRFToken(),Accept:"application/json"},body:JSON.stringify({action:e})}).then(i=>i.json()).then(i=>{if(i.success)x.success(window.i18n?.messages?.refinement_applied||"Refinement Applied!",i.message||window.i18n?.messages?.content_refined_successfully||"Content has been refined successfully.",{timer:2e3}).then(()=>{n?n(i):window.location.reload()});else throw new Error(i.message||window.i18n?.messages?.failed_to_apply_refinement||"Failed to apply refinement")}).catch(i=>{console.error("Error:",i),x.error(window.i18n?.messages?.refinement_failed||"Refinement Failed",i.message||window.i18n?.messages?.failed_to_apply_refinement_text||"Failed to apply refinement. Please try again.")})},adjustTone:function(e,t,n){x.showLoading(window.i18n?.messages?.adjusting_tone||"Adjusting Tone...",`Changing tone to ${e}...`),fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":b.getCSRFToken(),Accept:"application/json"},body:JSON.stringify({tone:e})}).then(i=>i.json()).then(i=>{if(i.success)x.success(window.i18n?.messages?.tone_adjusted||"Tone Adjusted!",i.message||window.i18n?.messages?.content_tone_adjusted||`Content tone has been changed to ${e}.`,{timer:2e3}).then(()=>{n?n(i):window.location.reload()});else throw new Error(i.message||window.i18n?.messages?.failed_to_adjust_tone||"Failed to adjust tone")}).catch(i=>{console.error("Error:",i),x.error(window.i18n?.messages?.tone_adjustment_failed||"Tone Adjustment Failed",i.message||window.i18n?.messages?.failed_to_adjust_tone_text||"Failed to adjust tone. Please try again.")})}};window.VersionManager={loadHistory:function(e,t){fetch(e,{headers:{Accept:"application/json","X-CSRF-TOKEN":b.getCSRFToken()}}).then(n=>n.json()).then(n=>{n.success&&t&&t(n.versions)}).catch(n=>{console.error("Error loading version history:",n)})},restoreVersion:function(e,t){x.confirm(window.i18n?.messages?.restore_version_question||"Restore Version?",window.i18n?.messages?.restore_version_text||"This will replace the current content with the selected version.",{confirmButtonText:window.i18n?.messages?.yes_restore_it||"Yes, restore it!",cancelButtonText:window.i18n?.messages?.cancel||"Cancel"}).then(n=>{n.isConfirmed&&this.performRestore(e,t)})},performRestore:function(e,t){x.showLoading(window.i18n?.messages?.restoring||"Restoring...",window.i18n?.messages?.restoring_text||"Please wait while we restore the version."),fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":b.getCSRFToken(),Accept:"application/json"},body:JSON.stringify({version_id:e})}).then(n=>n.json()).then(n=>{if(n.success)x.success(window.i18n?.messages?.version_restored_title||"Version Restored!",window.i18n?.messages?.version_restored_text||"The content has been restored successfully.",{timer:2e3}).then(()=>{window.location.reload()});else throw new Error(n.message||window.i18n?.messages?.version_restore_failed||"Failed to restore version")}).catch(n=>{console.error("Error:",n),x.error(window.i18n?.messages?.restore_failed||"Restore Failed",n.message||window.i18n?.messages?.version_restore_failed||"Failed to restore version. Please try again.")})}};window.CalendarManager={scheduleContent:function(e,t,n){x.showLoading(window.i18n?.messages?.scheduling||"Scheduling...",window.i18n?.messages?.scheduling_text||"Please wait while we schedule your content."),fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":b.getCSRFToken(),Accept:"application/json"},body:JSON.stringify(t)}).then(i=>i.json()).then(i=>{if(i.success)x.success(window.i18n?.messages?.content_scheduled||"Content Scheduled!",i.message||window.i18n?.messages?.content_scheduled_successfully||"Your content has been scheduled successfully.",{timer:2500}).then(()=>{n?n(i):window.location.reload()});else throw new Error(i.message||window.i18n?.messages?.failed_to_schedule_content||"Failed to schedule content")}).catch(i=>{console.error("Error:",i),x.error(window.i18n?.messages?.scheduling_failed||"Scheduling Failed",i.message||window.i18n?.messages?.failed_to_schedule_content_text||"Failed to schedule content. Please try again.")})},publishNow:function(e,t){x.confirm(window.i18n?.messages?.publish_now||"Publish Now?",window.i18n?.messages?.publish_now_text||"This will immediately publish your content.",{icon:"question",confirmButtonText:window.i18n?.messages?.yes_publish_now||"Yes, publish now!",cancelButtonColor:"#6c757d",cancelButtonText:window.i18n?.messages?.cancel||"Cancel"}).then(n=>{n.isConfirmed&&this.performPublish(e,t)})},performPublish:function(e,t){x.showLoading(window.i18n?.messages?.publishing||"Publishing...",window.i18n?.messages?.publishing_text||"Please wait while we publish your content."),fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":b.getCSRFToken(),Accept:"application/json"}}).then(n=>n.json()).then(n=>{if(n.success)x.success(window.i18n?.messages?.content_published||"Content Published!",window.i18n?.messages?.content_published_text||"Your content is now live.",{timer:2500}).then(()=>{t?t(n):window.location.reload()});else throw new Error(n.message||window.i18n?.messages?.failed_to_publish_content||"Failed to publish content")}).catch(n=>{console.error("Error:",n),x.error(window.i18n?.messages?.publishing_failed||"Publishing Failed",n.message||window.i18n?.messages?.failed_to_publish_content_text||"Failed to publish content. Please try again.")})}};window.ChatManager={messagesContainerId:"messagesContainer",messagesAreaId:"messagesArea",init:function(e={}){return this.messagesContainerId=e.messagesContainerId||"messagesContainer",this.messagesAreaId=e.messagesAreaId||"messagesArea",this},addMessage:function(e,t,n=!1,i={}){const a=i.containerId||this.messagesContainerId,l=i.areaId||this.messagesAreaId,r=document.getElementById(a),d=document.getElementById(l);if(!r)return console.error("ChatManager: Messages container not found"),null;const h=document.createElement("div");h.className=`message ${t}`;const g=document.createElement("div");g.className="message-avatar",g.innerHTML=t==="assistant"?i.assistantIcon||'<i class="fas fa-robot"></i>':i.userIcon||'<i class="fas fa-user"></i>';const m=document.createElement("div");return m.className="message-content",n&&(m.style.borderColor="#ef4444",m.classList.add("error-message")),m.innerHTML=e.replace(/\n/g,"<br>"),h.appendChild(g),h.appendChild(m),r.appendChild(h),d&&(d.scrollTop=d.scrollHeight),h},showTyping:function(e={}){const t=e.containerId||this.messagesContainerId,n=e.areaId||this.messagesAreaId,i=document.getElementById(t),a=document.getElementById(n);if(!i)return null;const l="typing-"+Date.now(),r=document.createElement("div");return r.id=l,r.className="message assistant",r.innerHTML=`
            <div class="message-avatar"><i class="fas fa-robot"></i></div>
            <div class="message-content">
                <div class="typing-indicator">
                    <span></span><span></span><span></span>
                </div>
            </div>
        `,i.appendChild(r),a&&(a.scrollTop=a.scrollHeight),l},removeTyping:function(e){const t=document.getElementById(e);return t?(t.remove(),!0):!1},clearMessages:function(e={}){const t=e.containerId||this.messagesContainerId,n=document.getElementById(t);n&&(n.innerHTML="")},createOptionTag:function(e,t,n){const i=document.createElement("span");return i.className=`selected-option selected-${t}`,i.innerHTML=`${e} <i class="fas fa-times remove" data-type="${t}"></i>`,i.querySelector(".remove").addEventListener("click",function(){typeof n=="function"&&n(t)}),i},sendMessage:async function(e,t,n={}){const i=document.querySelector('meta[name="csrf-token"]')?.content;try{const a=t instanceof FormData,l={method:"POST",headers:{"X-CSRF-TOKEN":i,Accept:"application/json"}};a?l.body=t:(l.headers["Content-Type"]="application/json",l.body=JSON.stringify(t));const d=await(await fetch(e,l)).json();return d.success?n.onSuccess&&n.onSuccess(d):n.onError&&n.onError(d),d}catch(a){throw console.error("ChatManager: Send message error",a),n.onNetworkError&&n.onNetworkError(a),a}},autoResizeTextarea:function(e,t=120){e&&(e.style.height="auto",e.style.height=Math.min(e.scrollHeight,t)+"px")}};window.ApiClient={getToken:function(){return document.querySelector('meta[name="csrf-token"]')?.content||""},buildOptions:function(e,t,n={}){const i=t instanceof FormData,a={"X-CSRF-TOKEN":this.getToken(),Accept:"application/json",...n};!i&&t&&(a["Content-Type"]="application/json");const l={method:e,headers:a};return t&&(l.body=i?t:JSON.stringify(t)),l},get:async function(e,t={}){const n=new URLSearchParams(t).toString(),i=n?`${e}?${n}`:e;return(await fetch(i,this.buildOptions("GET",null))).json()},post:async function(e,t={}){return(await fetch(e,this.buildOptions("POST",t))).json()},put:async function(e,t={}){return(await fetch(e,this.buildOptions("PUT",t))).json()},delete:async function(e,t={}){return(await fetch(e,this.buildOptions("DELETE",t))).json()},request:async function(e,t={}){const{method:n="POST",data:i={},loadingText:a="Processing...",showLoading:l=!0,onSuccess:r,onError:d,onFinally:h}=t;l&&typeof Swal<"u"&&Swal.fire({title:a,allowOutsideClick:!1,didOpen:()=>Swal.showLoading()});try{const m=await(await fetch(e,this.buildOptions(n,i))).json();return l&&typeof Swal<"u"&&Swal.close(),m.success?r&&r(m):d?d(m):typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:m.message||window.i18n?.messages?.operation_failed||"Operation failed"}),m}catch(g){throw console.error("ApiClient Error:",g),l&&typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.connection_failed||"Connection failed. Please try again."}),d&&d({success:!1,message:g.message}),g}finally{h&&h()}},submitForm:async function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;if(!n)return;const i=new FormData(n),a=n.action||window.location.href,l=n.method?.toUpperCase()||"POST";return this.request(a,{method:l,data:i,...t})}};window.FormHelper={bind:function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;!n||n.__formHelperBound||(n.__formHelperBound=!0,n.addEventListener("submit",async i=>{i.preventDefault(),await this.submit(n,t)}))},submit:async function(e,t={}){const n=typeof e=="string"?document.querySelector(e):e;if(!n)return null;const{onSuccess:i,onError:a,onBefore:l,onComplete:r,loadingText:d="Processing...",resetOnSuccess:h=!1,closeModalOnSuccess:g=!0}=t,m=n.querySelector('button[type="submit"], .btn-primary'),L=m?.innerHTML,p=n.closest(".modal");if(l&&l(n)===!1)return null;m&&(m.disabled=!0,m.innerHTML=`<i class="bi bi-hourglass-split me-1"></i>${d}`);try{const C=new FormData(n),y=n.action||window.location.href,w=await ApiClient.post(y,C);if(m&&(m.disabled=!1,m.innerHTML=L),w.success){if(h&&n.reset(),g&&p){const E=bootstrap.Modal.getInstance(p);E&&E.hide()}if(w.redirect)return window.location.href=w.redirect,w;i?i(w):w.message&&typeof Swal<"u"&&Swal.fire({icon:"success",title:w.message,toast:!0,position:"top-end",timer:3e3,showConfirmButton:!1})}else a?a(w):w.errors?this.showErrors(n,w.errors):w.message&&typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:w.message});return r&&r(w),w}catch(C){return m&&(m.disabled=!1,m.innerHTML=L),a?a({success:!1,message:C.message}):typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.check_connection||"Please check your connection"}),r&&r({success:!1,error:C}),null}},showErrors:function(e,t){this.clearErrors(e),Object.entries(t).forEach(([i,a])=>{const l=e.querySelector(`[name="${i}"], [name="${i}[]"]`);if(l){l.classList.add("is-invalid");const r=document.createElement("div");r.className="invalid-feedback d-block",r.textContent=Array.isArray(a)?a[0]:a,l.parentNode.appendChild(r)}});const n=e.querySelector(".is-invalid");n&&n.focus()},clearErrors:function(e){e&&(e.querySelectorAll(".is-invalid").forEach(t=>t.classList.remove("is-invalid")),e.querySelectorAll(".invalid-feedback").forEach(t=>t.remove()))},getData:function(e){const t=typeof e=="string"?document.querySelector(e):e;return t?Object.fromEntries(new FormData(t)):{}},setData:function(e,t){const n=typeof e=="string"?document.querySelector(e):e;!n||!t||Object.entries(t).forEach(([i,a])=>{const l=n.querySelector(`[name="${i}"]`);if(l)if(l.type==="checkbox")l.checked=!!a;else if(l.type==="radio"){const r=n.querySelector(`[name="${i}"][value="${a}"]`);r&&(r.checked=!0)}else l.value=a})},toggleFavorite:async function(e,t,n={}){const{removeCard:i=!0,onSuccess:a,successMessage:l,errorMessage:r}=n,d=e.closest(".col-lg-6, .col-md-6, .card"),h=e.querySelector("i"),g=h?.className;h&&(h.className="bi bi-hourglass-split fs-5"),e.disabled=!0;try{const m=await ApiClient.post(t);m.success?(i&&d&&(d.style.transition="opacity 0.3s, transform 0.3s",d.style.opacity="0",d.style.transform="scale(0.95)",setTimeout(()=>{d.remove(),document.querySelectorAll(".col-lg-6, .col-md-6").length===0&&location.reload()},300)),typeof Swal<"u"&&Swal.fire({icon:"success",title:l||m.message||window.i18n?.messages?.updated||"Updated!",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),a&&a(m)):(h&&(h.className=g),e.disabled=!1,typeof Swal<"u"&&Swal.fire({icon:"error",title:r||m.message||window.i18n?.messages?.error||"Error",toast:!0,position:"top-end",timer:3e3}))}catch{h&&(h.className=g),e.disabled=!1,typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",toast:!0,position:"top-end",timer:3e3})}},confirmDelete:async function(e,t={}){const{confirmTitle:n=window.i18n?.messages?.are_you_sure||"Are you sure?",confirmText:i=window.i18n?.messages?.action_cannot_be_undone||"This action cannot be undone.",confirmButton:a=window.i18n?.messages?.yes_delete||"Yes, Delete",onSuccess:l}=t;if(typeof Swal>"u"){if(!confirm(i))return}else if(!(await Swal.fire({icon:"warning",title:n,text:i,showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:a})).isConfirmed)return;try{const r=await ApiClient.delete(e);r.success?l?l(r):r.redirect?window.location.href=r.redirect:location.reload():typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.error||"Error",text:r.message})}catch{typeof Swal<"u"&&Swal.fire({icon:"error",title:window.i18n?.messages?.network_error||"Network Error",text:window.i18n?.messages?.please_try_again||"Please try again"})}}};window.formatDate=b.formatDate;window.debounce=b.debounce;document.addEventListener("DOMContentLoaded",function(){console.log("✅ AI Medical Content Generator - JavaScript Utilities Loaded (v4.5)"),console.log("📦 Available Managers:",{ContentManager:typeof window.ContentManager<"u",SeoManager:typeof window.SeoManager<"u",SocialManager:typeof window.SocialManager<"u",RefinementManager:typeof window.RefinementManager<"u",VersionManager:typeof window.VersionManager<"u",CalendarManager:typeof window.CalendarManager<"u",ChatManager:typeof window.ChatManager<"u",ApiClient:typeof window.ApiClient<"u",FormHelper:typeof window.FormHelper<"u"})});function $e(){const e=J(()=>import("./swiper-DpKYHp1-.js"),__vite__mapDeps([0,1])),t=J(()=>import("./index-BvN21dhf.js"),__vite__mapDeps([2,1]));return Promise.all([e,t]).then(([n,i])=>{const a=n.default||n.Swiper||n,l={Navigation:i.Navigation,Pagination:i.Pagination,Autoplay:i.Autoplay,EffectFade:i.EffectFade,EffectCreative:i.EffectCreative,EffectCoverflow:i.EffectCoverflow,Thumbs:i.Thumbs};return{Swiper:a,modules:l}})}function Ve(e,t){document.querySelectorAll('.swiper[data-swiper="category"]').forEach(n=>{const i=n.querySelector(".swiper-button-next"),a=n.querySelector(".swiper-button-prev"),l=n.querySelector(".swiper-pagination"),r=!!(i&&a),h=n.querySelectorAll(".swiper-slide").length>=3,g=[t.Pagination,t.Autoplay,t.EffectCoverflow];r&&g.push(t.Navigation),new e(n,{modules:g,loop:h,rewind:!h,watchOverflow:!0,speed:650,autoplay:{delay:3800,disableOnInteraction:!1},grabCursor:!0,effect:"coverflow",coverflowEffect:{rotate:6,stretch:0,depth:120,modifier:1,slideShadows:!0},centeredSlides:!1,slidesPerView:1,spaceBetween:20,breakpoints:{576:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:24},992:{slidesPerView:1,spaceBetween:28}},pagination:{el:l,clickable:!0},...r?{navigation:{nextEl:i,prevEl:a}}:{}})})}function Ue(e,t){document.querySelectorAll(".product-gallery").forEach(n=>{const i=n.querySelector('.swiper[data-swiper="product"]'),a=n.querySelector('.swiper[data-swiper="product-thumbs"]');let l=null;if(a&&(l=new e(a,{modules:[t.Navigation],slidesPerView:5,spaceBetween:8,freeMode:!0,watchSlidesProgress:!0,breakpoints:{0:{slidesPerView:4},576:{slidesPerView:5}}})),i){const r=i.querySelector(".swiper-pagination");new e(i,{modules:[t.Pagination,t.EffectFade,t.Thumbs],loop:!0,speed:500,effect:"fade",fadeEffect:{crossFade:!0},slidesPerView:1,spaceBetween:8,pagination:{el:r,clickable:!0},thumbs:l?{swiper:l}:void 0})}})}function pe(){document.querySelector(".swiper")&&$e().then(({Swiper:t,modules:n})=>{Ve(t,n),Ue(t,n)}).catch(()=>{})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",pe):pe();var le={exports:{}},me;function He(){return me||(me=1,function(e){(function(t){e.exports?e.exports=t():window.intlTelInput=t()})(()=>{var t=(()=>{var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,r=(s,o)=>{for(var c in o)n(s,c,{get:o[c],enumerable:!0})},d=(s,o,c,u)=>{if(o&&typeof o=="object"||typeof o=="function")for(let f of a(o))!l.call(s,f)&&f!==c&&n(s,f,{get:()=>o[f],enumerable:!(u=i(o,f))||u.enumerable});return s},h=s=>d(n({},"__esModule",{value:!0}),s),g={};r(g,{Iti:()=>ne,default:()=>Ie});var m=[["af","93"],["ax","358",1,["18"]],["al","355"],["dz","213"],["as","1",5,["684"]],["ad","376"],["ao","244"],["ai","1",6,["264"]],["ag","1",7,["268"]],["ar","54"],["am","374"],["aw","297"],["ac","247"],["au","61",0],["at","43"],["az","994"],["bs","1",8,["242"]],["bh","973"],["bd","880"],["bb","1",9,["246"]],["by","375"],["be","32"],["bz","501"],["bj","229"],["bm","1",10,["441"]],["bt","975"],["bo","591"],["ba","387"],["bw","267"],["br","55"],["io","246"],["vg","1",11,["284"]],["bn","673"],["bg","359"],["bf","226"],["bi","257"],["kh","855"],["cm","237"],["ca","1",1,["204","226","236","249","250","263","289","306","343","354","365","367","368","382","387","403","416","418","428","431","437","438","450","584","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","879","902","905"]],["cv","238"],["bq","599",1,["3","4","7"]],["ky","1",12,["345"]],["cf","236"],["td","235"],["cl","56"],["cn","86"],["cx","61",2,["89164"]],["cc","61",1,["89162"]],["co","57"],["km","269"],["cg","242"],["cd","243"],["ck","682"],["cr","506"],["ci","225"],["hr","385"],["cu","53"],["cw","599",0],["cy","357"],["cz","420"],["dk","45"],["dj","253"],["dm","1",13,["767"]],["do","1",2,["809","829","849"]],["ec","593"],["eg","20"],["sv","503"],["gq","240"],["er","291"],["ee","372"],["sz","268"],["et","251"],["fk","500"],["fo","298"],["fj","679"],["fi","358",0],["fr","33"],["gf","594"],["pf","689"],["ga","241"],["gm","220"],["ge","995"],["de","49"],["gh","233"],["gi","350"],["gr","30"],["gl","299"],["gd","1",14,["473"]],["gp","590",0],["gu","1",15,["671"]],["gt","502"],["gg","44",1,["1481","7781","7839","7911"]],["gn","224"],["gw","245"],["gy","592"],["ht","509"],["hn","504"],["hk","852"],["hu","36"],["is","354"],["in","91"],["id","62"],["ir","98"],["iq","964"],["ie","353"],["im","44",2,["1624","74576","7524","7924","7624"]],["il","972"],["it","39",0],["jm","1",4,["876","658"]],["jp","81"],["je","44",3,["1534","7509","7700","7797","7829","7937"]],["jo","962"],["kz","7",1,["33","7"]],["ke","254"],["ki","686"],["xk","383"],["kw","965"],["kg","996"],["la","856"],["lv","371"],["lb","961"],["ls","266"],["lr","231"],["ly","218"],["li","423"],["lt","370"],["lu","352"],["mo","853"],["mg","261"],["mw","265"],["my","60"],["mv","960"],["ml","223"],["mt","356"],["mh","692"],["mq","596"],["mr","222"],["mu","230"],["yt","262",1,["269","639"]],["mx","52"],["fm","691"],["md","373"],["mc","377"],["mn","976"],["me","382"],["ms","1",16,["664"]],["ma","212",0],["mz","258"],["mm","95"],["na","264"],["nr","674"],["np","977"],["nl","31"],["nc","687"],["nz","64"],["ni","505"],["ne","227"],["ng","234"],["nu","683"],["nf","672"],["kp","850"],["mk","389"],["mp","1",17,["670"]],["no","47",0],["om","968"],["pk","92"],["pw","680"],["ps","970"],["pa","507"],["pg","675"],["py","595"],["pe","51"],["ph","63"],["pl","48"],["pt","351"],["pr","1",3,["787","939"]],["qa","974"],["re","262",0],["ro","40"],["ru","7",0],["rw","250"],["ws","685"],["sm","378"],["st","239"],["sa","966"],["sn","221"],["rs","381"],["sc","248"],["sl","232"],["sg","65"],["sx","1",21,["721"]],["sk","421"],["si","386"],["sb","677"],["so","252"],["za","27"],["kr","82"],["ss","211"],["es","34"],["lk","94"],["bl","590",1],["sh","290"],["kn","1",18,["869"]],["lc","1",19,["758"]],["mf","590",2],["pm","508"],["vc","1",20,["784"]],["sd","249"],["sr","597"],["sj","47",1,["79"]],["se","46"],["ch","41"],["sy","963"],["tw","886"],["tj","992"],["tz","255"],["th","66"],["tl","670"],["tg","228"],["tk","690"],["to","676"],["tt","1",22,["868"]],["tn","216"],["tr","90"],["tm","993"],["tc","1",23,["649"]],["tv","688"],["ug","256"],["ua","380"],["ae","971"],["gb","44",0],["us","1",0],["uy","598"],["vi","1",24,["340"]],["uz","998"],["vu","678"],["va","39",1,["06698"]],["ve","58"],["vn","84"],["wf","681"],["eh","212",1,["5288","5289"]],["ye","967"],["zm","260"],["zw","263"]],L=[];for(let s=0;s<m.length;s++){const o=m[s];L[s]={name:"",iso2:o[0],dialCode:o[1],priority:o[2]||0,areaCodes:o[3]||null,nodeById:{}}}var p=L,C={ad:"Andorra",ae:"United Arab Emirates",af:"Afghanistan",ag:"Antigua & Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",ar:"Argentina",as:"American Samoa",at:"Austria",au:"Australia",aw:"Aruba",ax:"Åland Islands",az:"Azerbaijan",ba:"Bosnia & Herzegovina",bb:"Barbados",bd:"Bangladesh",be:"Belgium",bf:"Burkina Faso",bg:"Bulgaria",bh:"Bahrain",bi:"Burundi",bj:"Benin",bl:"St. Barthélemy",bm:"Bermuda",bn:"Brunei",bo:"Bolivia",bq:"Caribbean Netherlands",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cc:"Cocos (Keeling) Islands",cd:"Congo - Kinshasa",cf:"Central African Republic",cg:"Congo - Brazzaville",ch:"Switzerland",ci:"Côte d’Ivoire",ck:"Cook Islands",cl:"Chile",cm:"Cameroon",cn:"China",co:"Colombia",cr:"Costa Rica",cu:"Cuba",cv:"Cape Verde",cw:"Curaçao",cx:"Christmas Island",cy:"Cyprus",cz:"Czechia",de:"Germany",dj:"Djibouti",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",eh:"Western Sahara",er:"Eritrea",es:"Spain",et:"Ethiopia",fi:"Finland",fj:"Fiji",fk:"Falkland Islands",fm:"Micronesia",fo:"Faroe Islands",fr:"France",ga:"Gabon",gb:"United Kingdom",gd:"Grenada",ge:"Georgia",gf:"French Guiana",gg:"Guernsey",gh:"Ghana",gi:"Gibraltar",gl:"Greenland",gm:"Gambia",gn:"Guinea",gp:"Guadeloupe",gq:"Equatorial Guinea",gr:"Greece",gt:"Guatemala",gu:"Guam",gw:"Guinea-Bissau",gy:"Guyana",hk:"Hong Kong SAR China",hn:"Honduras",hr:"Croatia",ht:"Haiti",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",im:"Isle of Man",in:"India",io:"British Indian Ocean Territory",iq:"Iraq",ir:"Iran",is:"Iceland",it:"Italy",je:"Jersey",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Kyrgyzstan",kh:"Cambodia",ki:"Kiribati",km:"Comoros",kn:"St. Kitts & Nevis",kp:"North Korea",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"St. Lucia",li:"Liechtenstein",lk:"Sri Lanka",lr:"Liberia",ls:"Lesotho",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",ly:"Libya",ma:"Morocco",mc:"Monaco",md:"Moldova",me:"Montenegro",mf:"St. Martin",mg:"Madagascar",mh:"Marshall Islands",mk:"North Macedonia",ml:"Mali",mm:"Myanmar (Burma)",mn:"Mongolia",mo:"Macao SAR China",mp:"Northern Mariana Islands",mq:"Martinique",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mv:"Maldives",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",nc:"New Caledonia",ne:"Niger",nf:"Norfolk Island",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",no:"Norway",np:"Nepal",nr:"Nauru",nu:"Niue",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pf:"French Polynesia",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pm:"St. Pierre & Miquelon",pr:"Puerto Rico",ps:"Palestinian Territories",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",re:"Réunion",ro:"Romania",rs:"Serbia",ru:"Russia",rw:"Rwanda",sa:"Saudi Arabia",sb:"Solomon Islands",sc:"Seychelles",sd:"Sudan",se:"Sweden",sg:"Singapore",sh:"St. Helena",si:"Slovenia",sj:"Svalbard & Jan Mayen",sk:"Slovakia",sl:"Sierra Leone",sm:"San Marino",sn:"Senegal",so:"Somalia",sr:"Suriname",ss:"South Sudan",st:"São Tomé & Príncipe",sv:"El Salvador",sx:"Sint Maarten",sy:"Syria",sz:"Eswatini",tc:"Turks & Caicos Islands",td:"Chad",tg:"Togo",th:"Thailand",tj:"Tajikistan",tk:"Tokelau",tl:"Timor-Leste",tm:"Turkmenistan",tn:"Tunisia",to:"Tonga",tr:"Turkey",tt:"Trinidad & Tobago",tv:"Tuvalu",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",us:"United States",uy:"Uruguay",uz:"Uzbekistan",va:"Vatican City",vc:"St. Vincent & Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vi:"U.S. Virgin Islands",vn:"Vietnam",vu:"Vanuatu",wf:"Wallis & Futuna",ws:"Samoa",ye:"Yemen",yt:"Mayotte",za:"South Africa",zm:"Zambia",zw:"Zimbabwe"},y=C,w={selectedCountryAriaLabel:"Selected country",noCountrySelected:"No country selected",countryListAriaLabel:"List of countries",searchPlaceholder:"Search",zeroSearchResults:"No results found",oneSearchResult:"1 result found",multipleSearchResults:"${count} results found",ac:"Ascension Island",xk:"Kosovo"},E=w,_={...y,...E},P=_;for(let s=0;s<p.length;s++)p[s].name=P[p[s].iso2];var W=0,U={allowDropdown:!0,autoPlaceholder:"polite",containerClass:"",countryOrder:null,countrySearch:!0,customPlaceholder:null,dropdownContainer:null,excludeCountries:[],fixDropdownWidth:!0,formatAsYouType:!0,formatOnDisplay:!0,geoIpLookup:null,hiddenInput:null,i18n:{},initialCountry:"",loadUtilsOnInit:"",nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",showFlags:!0,separateDialCode:!1,strictMode:!1,useFullscreenPopup:typeof navigator<"u"&&typeof window<"u"?/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=500:!1,utilsScript:"",validationNumberType:"MOBILE"},Z=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],H=s=>s.replace(/\D/g,""),B=(s="")=>s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),X=s=>{const o=H(s);if(o.charAt(0)==="1"){const c=o.substr(1,3);return Z.indexOf(c)!==-1}return!1},z=(s,o,c,u)=>{if(c===0&&!u)return 0;let f=0;for(let v=0;v<o.length;v++){if(/[+0-9]/.test(o[v])&&f++,f===s&&!u)return v+1;if(u&&f===s+1)return v}return o.length},k=(s,o,c)=>{const u=document.createElement(s);return o&&Object.entries(o).forEach(([f,v])=>u.setAttribute(f,v)),c&&c.appendChild(u),u},V=(s,...o)=>{const{instances:c}=S;Object.values(c).forEach(u=>u[s](...o))},ne=class{constructor(s,o={}){this.id=W++,this.telInput=s,this.highlightedItem=null,this.options=Object.assign({},U,o),this.hadInitialPlaceholder=!!s.getAttribute("placeholder")}_init(){this.options.useFullscreenPopup&&(this.options.fixDropdownWidth=!1),this.options.onlyCountries.length===1&&(this.options.initialCountry=this.options.onlyCountries[0]),this.options.separateDialCode&&(this.options.nationalMode=!1),this.options.allowDropdown&&!this.options.showFlags&&!this.options.separateDialCode&&(this.options.nationalMode=!1),this.options.useFullscreenPopup&&!this.options.dropdownContainer&&(this.options.dropdownContainer=document.body),this.isAndroid=typeof navigator<"u"?/Android/i.test(navigator.userAgent):!1,this.isRTL=!!this.telInput.closest("[dir=rtl]");const s=this.options.allowDropdown||this.options.separateDialCode;this.showSelectedCountryOnLeft=this.isRTL?!s:s,this.options.separateDialCode&&(this.isRTL?this.originalPaddingRight=this.telInput.style.paddingRight:this.originalPaddingLeft=this.telInput.style.paddingLeft),this.options.i18n={...P,...this.options.i18n};const o=new Promise((u,f)=>{this.resolveAutoCountryPromise=u,this.rejectAutoCountryPromise=f}),c=new Promise((u,f)=>{this.resolveUtilsScriptPromise=u,this.rejectUtilsScriptPromise=f});this.promise=Promise.all([o,c]),this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}_processCountryData(){this._processAllCountries(),this._processDialCodes(),this._translateCountryNames(),this._sortCountries()}_sortCountries(){this.options.countryOrder&&(this.options.countryOrder=this.options.countryOrder.map(s=>s.toLowerCase())),this.countries.sort((s,o)=>{const{countryOrder:c}=this.options;if(c){const u=c.indexOf(s.iso2),f=c.indexOf(o.iso2),v=u>-1,I=f>-1;if(v||I)return v&&I?u-f:v?-1:1}return s.name.localeCompare(o.name)})}_addToDialCodeMap(s,o,c){o.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=o.length),this.dialCodeToIso2Map.hasOwnProperty(o)||(this.dialCodeToIso2Map[o]=[]);for(let f=0;f<this.dialCodeToIso2Map[o].length;f++)if(this.dialCodeToIso2Map[o][f]===s)return;const u=c!==void 0?c:this.dialCodeToIso2Map[o].length;this.dialCodeToIso2Map[o][u]=s}_processAllCountries(){const{onlyCountries:s,excludeCountries:o}=this.options;if(s.length){const c=s.map(u=>u.toLowerCase());this.countries=p.filter(u=>c.indexOf(u.iso2)>-1)}else if(o.length){const c=o.map(u=>u.toLowerCase());this.countries=p.filter(u=>c.indexOf(u.iso2)===-1)}else this.countries=p}_translateCountryNames(){for(let s=0;s<this.countries.length;s++){const o=this.countries[s].iso2.toLowerCase();this.options.i18n.hasOwnProperty(o)&&(this.countries[s].name=this.options.i18n[o])}}_processDialCodes(){this.dialCodes={},this.dialCodeMaxLen=0,this.dialCodeToIso2Map={};for(let s=0;s<this.countries.length;s++){const o=this.countries[s];this.dialCodes[o.dialCode]||(this.dialCodes[o.dialCode]=!0),this._addToDialCodeMap(o.iso2,o.dialCode,o.priority)}for(let s=0;s<this.countries.length;s++){const o=this.countries[s];if(o.areaCodes){const c=this.dialCodeToIso2Map[o.dialCode][0];for(let u=0;u<o.areaCodes.length;u++){const f=o.areaCodes[u];for(let v=1;v<f.length;v++){const I=o.dialCode+f.substr(0,v);this._addToDialCodeMap(c,I),this._addToDialCodeMap(o.iso2,I)}this._addToDialCodeMap(o.iso2,o.dialCode+f)}}}}_generateMarkup(){this.telInput.classList.add("iti__tel-input"),!this.telInput.hasAttribute("autocomplete")&&!(this.telInput.form&&this.telInput.form.hasAttribute("autocomplete"))&&this.telInput.setAttribute("autocomplete","off");const{allowDropdown:s,separateDialCode:o,showFlags:c,containerClass:u,hiddenInput:f,dropdownContainer:v,fixDropdownWidth:I,useFullscreenPopup:T,countrySearch:F,i18n:N}=this.options;let D="iti";s&&(D+=" iti--allow-dropdown"),c&&(D+=" iti--show-flags"),u&&(D+=` ${u}`),T||(D+=" iti--inline-dropdown");const q=k("div",{class:D});if(this.telInput.parentNode?.insertBefore(q,this.telInput),s||c||o){this.countryContainer=k("div",{class:"iti__country-container"},q),this.showSelectedCountryOnLeft?this.countryContainer.style.left="0px":this.countryContainer.style.right="0px",s?(this.selectedCountry=k("button",{type:"button",class:"iti__selected-country","aria-expanded":"false","aria-label":this.options.i18n.selectedCountryAriaLabel,"aria-haspopup":"true","aria-controls":`iti-${this.id}__dropdown-content`,role:"combobox"},this.countryContainer),this.telInput.disabled&&this.selectedCountry.setAttribute("disabled","true")):this.selectedCountry=k("div",{class:"iti__selected-country"},this.countryContainer);const K=k("div",{class:"iti__selected-country-primary"},this.selectedCountry);if(this.selectedCountryInner=k("div",{class:"iti__flag"},K),this.selectedCountryA11yText=k("span",{class:"iti__a11y-text"},this.selectedCountryInner),s&&(this.dropdownArrow=k("div",{class:"iti__arrow","aria-hidden":"true"},K)),o&&(this.selectedDialCode=k("div",{class:"iti__selected-dial-code"},this.selectedCountry)),s){const R=I?"":"iti--flexible-dropdown-width";if(this.dropdownContent=k("div",{id:`iti-${this.id}__dropdown-content`,class:`iti__dropdown-content iti__hide ${R}`}),F&&(this.searchInput=k("input",{type:"text",class:"iti__search-input",placeholder:N.searchPlaceholder,role:"combobox","aria-expanded":"true","aria-label":N.searchPlaceholder,"aria-controls":`iti-${this.id}__country-listbox`,"aria-autocomplete":"list",autocomplete:"off"},this.dropdownContent),this.searchResultsA11yText=k("span",{class:"iti__a11y-text"},this.dropdownContent)),this.countryList=k("ul",{class:"iti__country-list",id:`iti-${this.id}__country-listbox`,role:"listbox","aria-label":N.countryListAriaLabel},this.dropdownContent),this._appendListItems(),F&&this._updateSearchResultsText(),v){let G="iti iti--container";T?G+=" iti--fullscreen-popup":G+=" iti--inline-dropdown",this.dropdown=k("div",{class:G}),this.dropdown.appendChild(this.dropdownContent)}else this.countryContainer.appendChild(this.dropdownContent)}}if(q.appendChild(this.telInput),this._updateInputPadding(),f){const K=this.telInput.getAttribute("name")||"",R=f(K);R.phone&&(this.hiddenInput=k("input",{type:"hidden",name:R.phone}),q.appendChild(this.hiddenInput)),R.country&&(this.hiddenInputCountry=k("input",{type:"hidden",name:R.country}),q.appendChild(this.hiddenInputCountry))}}_appendListItems(){for(let s=0;s<this.countries.length;s++){const o=this.countries[s],c=s===0?"iti__highlight":"",u=k("li",{id:`iti-${this.id}__item-${o.iso2}`,class:`iti__country ${c}`,tabindex:"-1",role:"option","data-dial-code":o.dialCode,"data-country-code":o.iso2,"aria-selected":"false"},this.countryList);o.nodeById[this.id]=u;let f="";this.options.showFlags&&(f+=`<div class='iti__flag iti__${o.iso2}'></div>`),f+=`<span class='iti__country-name'>${o.name}</span>`,f+=`<span class='iti__dial-code'>+${o.dialCode}</span>`,u.insertAdjacentHTML("beforeend",f)}}_setInitialState(s=!1){const o=this.telInput.getAttribute("value"),c=this.telInput.value,f=o&&o.charAt(0)==="+"&&(!c||c.charAt(0)!=="+")?o:c,v=this._getDialCode(f),I=X(f),{initialCountry:T,geoIpLookup:F}=this.options,N=T==="auto"&&F;if(v&&!I)this._updateCountryFromNumber(f);else if(!N||s){const D=T?T.toLowerCase():"";D&&this._getCountryData(D,!0)?this._setCountry(D):v&&I?this._setCountry("us"):this._setCountry()}f&&this._updateValFromNumber(f)}_initListeners(){this._initTelInputListeners(),this.options.allowDropdown&&this._initDropdownListeners(),(this.hiddenInput||this.hiddenInputCountry)&&this.telInput.form&&this._initHiddenInputListener()}_initHiddenInputListener(){this._handleHiddenInputSubmit=()=>{this.hiddenInput&&(this.hiddenInput.value=this.getNumber()),this.hiddenInputCountry&&(this.hiddenInputCountry.value=this.getSelectedCountryData().iso2||"")},this.telInput.form?.addEventListener("submit",this._handleHiddenInputSubmit)}_initDropdownListeners(){this._handleLabelClick=o=>{this.dropdownContent.classList.contains("iti__hide")?this.telInput.focus():o.preventDefault()};const s=this.telInput.closest("label");s&&s.addEventListener("click",this._handleLabelClick),this._handleClickSelectedCountry=()=>{this.dropdownContent.classList.contains("iti__hide")&&!this.telInput.disabled&&!this.telInput.readOnly&&this._openDropdown()},this.selectedCountry.addEventListener("click",this._handleClickSelectedCountry),this._handleCountryContainerKeydown=o=>{this.dropdownContent.classList.contains("iti__hide")&&["ArrowUp","ArrowDown"," ","Enter"].includes(o.key)&&(o.preventDefault(),o.stopPropagation(),this._openDropdown()),o.key==="Tab"&&this._closeDropdown()},this.countryContainer.addEventListener("keydown",this._handleCountryContainerKeydown)}_initRequests(){let{loadUtilsOnInit:s,utilsScript:o,initialCountry:c,geoIpLookup:u}=this.options;!s&&o&&(console.warn("intl-tel-input: The `utilsScript` option is deprecated and will be removed in a future release! Please use the `loadUtilsOnInit` option instead."),s=o),s&&!S.utils?(this._handlePageLoad=()=>{window.removeEventListener("load",this._handlePageLoad),S.loadUtils(s)?.catch(()=>{})},S.documentReady()?this._handlePageLoad():window.addEventListener("load",this._handlePageLoad)):this.resolveUtilsScriptPromise(),c==="auto"&&u&&!this.selectedCountryData.iso2?this._loadAutoCountry():this.resolveAutoCountryPromise()}_loadAutoCountry(){S.autoCountry?this.handleAutoCountry():S.startedLoadingAutoCountry||(S.startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup((s="")=>{const o=s.toLowerCase();o&&this._getCountryData(o,!0)?(S.autoCountry=o,setTimeout(()=>V("handleAutoCountry"))):(this._setInitialState(!0),V("rejectAutoCountryPromise"))},()=>{this._setInitialState(!0),V("rejectAutoCountryPromise")}))}_openDropdownWithPlus(){this._openDropdown(),this.searchInput.value="+",this._filterCountries("",!0)}_initTelInputListeners(){const{strictMode:s,formatAsYouType:o,separateDialCode:c,formatOnDisplay:u,allowDropdown:f,countrySearch:v}=this.options;let I=!1;new RegExp("\\p{L}","u").test(this.telInput.value)&&(I=!0),this._handleInputEvent=T=>{if(this.isAndroid&&T?.data==="+"&&c&&f&&v){const q=this.telInput.selectionStart||0,K=this.telInput.value.substring(0,q-1),R=this.telInput.value.substring(q);this.telInput.value=K+R,this._openDropdownWithPlus();return}this._updateCountryFromNumber(this.telInput.value)&&this._triggerCountryChange();const F=T?.data&&/[^+0-9]/.test(T.data),N=T?.inputType==="insertFromPaste"&&this.telInput.value;F||N&&!s?I=!0:/[^+0-9]/.test(this.telInput.value)||(I=!1);const D=T?.detail&&T.detail.isSetNumber&&!u;if(o&&!I&&!D){const q=this.telInput.selectionStart||0,R=this.telInput.value.substring(0,q).replace(/[^+0-9]/g,"").length,G=T?.inputType==="deleteContentForward",ie=this._formatNumberAsYouType(),se=z(R,ie,q,G);this.telInput.value=ie,this.telInput.setSelectionRange(se,se)}},this.telInput.addEventListener("input",this._handleInputEvent),(s||c)&&(this._handleKeydownEvent=T=>{if(T.key&&T.key.length===1&&!T.altKey&&!T.ctrlKey&&!T.metaKey){if(c&&f&&v&&T.key==="+"){T.preventDefault(),this._openDropdownWithPlus();return}if(s){const F=this.telInput.value,N=F.charAt(0)==="+",D=!N&&this.telInput.selectionStart===0&&T.key==="+",q=/^[0-9]$/.test(T.key),K=c?q:D||q,R=F.slice(0,this.telInput.selectionStart)+T.key+F.slice(this.telInput.selectionEnd),G=this._getFullNumber(R),ie=S.utils.getCoreNumber(G,this.selectedCountryData.iso2),se=this.maxCoreNumberLength&&ie.length>this.maxCoreNumberLength;let ue=!1;if(N){const xe=this.selectedCountryData.iso2;ue=this._getCountryFromNumber(G)!==xe}(!K||se&&!ue&&!D)&&T.preventDefault()}}},this.telInput.addEventListener("keydown",this._handleKeydownEvent))}_cap(s){const o=parseInt(this.telInput.getAttribute("maxlength")||"",10);return o&&s.length>o?s.substr(0,o):s}_trigger(s,o={}){const c=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:o});this.telInput.dispatchEvent(c)}_openDropdown(){const{fixDropdownWidth:s,countrySearch:o}=this.options;if(s&&(this.dropdownContent.style.width=`${this.telInput.offsetWidth}px`),this.dropdownContent.classList.remove("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","true"),this._setDropdownPosition(),o){const c=this.countryList.firstElementChild;c&&(this._highlightListItem(c,!1),this.countryList.scrollTop=0),this.searchInput.focus()}this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}_setDropdownPosition(){if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.options.useFullscreenPopup){const s=this.telInput.getBoundingClientRect(),o=this.telInput.offsetHeight;this.options.dropdownContainer&&(this.dropdown.style.top=`${s.top+o}px`,this.dropdown.style.left=`${s.left}px`,this._handleWindowScroll=()=>this._closeDropdown(),window.addEventListener("scroll",this._handleWindowScroll))}}_bindDropdownListeners(){this._handleMouseoverCountryList=u=>{const f=u.target?.closest(".iti__country");f&&this._highlightListItem(f,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=u=>{const f=u.target?.closest(".iti__country");f&&this._selectListItem(f)},this.countryList.addEventListener("click",this._handleClickCountryList);let s=!0;this._handleClickOffToClose=()=>{s||this._closeDropdown(),s=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);let o="",c=null;if(this._handleKeydownOnDropdown=u=>{["ArrowUp","ArrowDown","Enter","Escape"].includes(u.key)&&(u.preventDefault(),u.stopPropagation(),u.key==="ArrowUp"||u.key==="ArrowDown"?this._handleUpDownKey(u.key):u.key==="Enter"?this._handleEnterKey():u.key==="Escape"&&this._closeDropdown()),!this.options.countrySearch&&/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(u.key)&&(u.stopPropagation(),c&&clearTimeout(c),o+=u.key.toLowerCase(),this._searchForCountry(o),c=setTimeout(()=>{o=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch){const u=()=>{const v=this.searchInput.value.trim();v?this._filterCountries(v):this._filterCountries("",!0)};let f=null;this._handleSearchChange=()=>{f&&clearTimeout(f),f=setTimeout(()=>{u(),f=null},100)},this.searchInput.addEventListener("input",this._handleSearchChange),this.searchInput.addEventListener("click",v=>v.stopPropagation())}}_searchForCountry(s){for(let o=0;o<this.countries.length;o++){const c=this.countries[o];if(c.name.substr(0,s.length).toLowerCase()===s){const f=c.nodeById[this.id];this._highlightListItem(f,!1),this._scrollTo(f);break}}}_filterCountries(s,o=!1){let c=!0;this.countryList.innerHTML="";const u=B(s);for(let f=0;f<this.countries.length;f++){const v=this.countries[f],I=B(v.name),T=v.name.split(/[^a-zA-ZÀ-ÿа-яА-Я]/).map(N=>N[0]).join("").toLowerCase(),F=`+${v.dialCode}`;if(o||I.includes(u)||F.includes(u)||v.iso2.includes(u)||T.includes(u)){const N=v.nodeById[this.id];N&&this.countryList.appendChild(N),c&&(this._highlightListItem(N,!1),c=!1)}}c&&this._highlightListItem(null,!1),this.countryList.scrollTop=0,this._updateSearchResultsText()}_updateSearchResultsText(){const{i18n:s}=this.options,o=this.countryList.childElementCount;let c;o===0?c=s.zeroSearchResults:o===1?c=s.oneSearchResult:c=s.multipleSearchResults.replace("${count}",o.toString()),this.searchResultsA11yText.textContent=c}_handleUpDownKey(s){let o=s==="ArrowUp"?this.highlightedItem?.previousElementSibling:this.highlightedItem?.nextElementSibling;!o&&this.countryList.childElementCount>1&&(o=s==="ArrowUp"?this.countryList.lastElementChild:this.countryList.firstElementChild),o&&(this._scrollTo(o),this._highlightListItem(o,!1))}_handleEnterKey(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}_updateValFromNumber(s){let o=s;if(this.options.formatOnDisplay&&S.utils&&this.selectedCountryData){const c=this.options.nationalMode||o.charAt(0)!=="+"&&!this.options.separateDialCode,{NATIONAL:u,INTERNATIONAL:f}=S.utils.numberFormat,v=c?u:f;o=S.utils.formatNumber(o,this.selectedCountryData.iso2,v)}o=this._beforeSetNumber(o),this.telInput.value=o}_updateCountryFromNumber(s){const o=this._getCountryFromNumber(s);return o!==null?this._setCountry(o):!1}_getCountryFromNumber(s){const o=s.indexOf("+");let c=o?s.substring(o):s;const u=this.selectedCountryData.dialCode;c&&u==="1"&&c.charAt(0)!=="+"&&(c.charAt(0)!=="1"&&(c=`1${c}`),c=`+${c}`),this.options.separateDialCode&&u&&c.charAt(0)!=="+"&&(c=`+${u}${c}`);const v=this._getDialCode(c,!0),I=H(c);if(v){const T=this.dialCodeToIso2Map[H(v)],F=T.indexOf(this.selectedCountryData.iso2)!==-1&&I.length<=v.length-1;if(!(u==="1"&&X(I))&&!F){for(let D=0;D<T.length;D++)if(T[D])return T[D]}}else{if(c.charAt(0)==="+"&&I.length)return"";if((!c||c==="+")&&!this.selectedCountryData.iso2)return this.defaultCountry}return null}_highlightListItem(s,o){const c=this.highlightedItem;if(c&&(c.classList.remove("iti__highlight"),c.setAttribute("aria-selected","false")),this.highlightedItem=s,this.highlightedItem){this.highlightedItem.classList.add("iti__highlight"),this.highlightedItem.setAttribute("aria-selected","true");const u=this.highlightedItem.getAttribute("id")||"";this.selectedCountry.setAttribute("aria-activedescendant",u),this.options.countrySearch&&this.searchInput.setAttribute("aria-activedescendant",u)}o&&this.highlightedItem.focus()}_getCountryData(s,o){for(let c=0;c<this.countries.length;c++)if(this.countries[c].iso2===s)return this.countries[c];if(o)return null;throw new Error(`No country data for '${s}'`)}_setCountry(s){const{separateDialCode:o,showFlags:c,i18n:u}=this.options,f=this.selectedCountryData.iso2?this.selectedCountryData:{};if(this.selectedCountryData=s?this._getCountryData(s,!1)||{}:{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedCountryInner){let v="",I="";s&&c?(v=`iti__flag iti__${s}`,I=`${this.selectedCountryData.name} +${this.selectedCountryData.dialCode}`):(v="iti__flag iti__globe",I=u.noCountrySelected),this.selectedCountryInner.className=v,this.selectedCountryA11yText.textContent=I}if(this._setSelectedCountryTitleAttribute(s,o),o){const v=this.selectedCountryData.dialCode?`+${this.selectedCountryData.dialCode}`:"";this.selectedDialCode.innerHTML=v,this._updateInputPadding()}return this._updatePlaceholder(),this._updateMaxLength(),f.iso2!==s}_updateInputPadding(){if(this.selectedCountry){const o=(this.selectedCountry.offsetWidth||this._getHiddenSelectedCountryWidth())+6;this.showSelectedCountryOnLeft?this.telInput.style.paddingLeft=`${o}px`:this.telInput.style.paddingRight=`${o}px`}}_updateMaxLength(){const{strictMode:s,placeholderNumberType:o,validationNumberType:c}=this.options,{iso2:u}=this.selectedCountryData;if(s&&S.utils)if(u){const f=S.utils.numberType[o];let v=S.utils.getExampleNumber(u,!1,f,!0),I=v;for(;S.utils.isPossibleNumber(v,u,c);)I=v,v+="0";const T=S.utils.getCoreNumber(I,u);this.maxCoreNumberLength=T.length,u==="by"&&(this.maxCoreNumberLength=T.length+1)}else this.maxCoreNumberLength=null}_setSelectedCountryTitleAttribute(s=null,o){if(!this.selectedCountry)return;let c;s&&!o?c=`${this.selectedCountryData.name}: +${this.selectedCountryData.dialCode}`:s?c=this.selectedCountryData.name:c="Unknown",this.selectedCountry.setAttribute("title",c)}_getHiddenSelectedCountryWidth(){if(this.telInput.parentNode){const s=this.telInput.parentNode.cloneNode(!1);s.style.visibility="hidden",document.body.appendChild(s);const o=this.countryContainer.cloneNode();s.appendChild(o);const c=this.selectedCountry.cloneNode(!0);o.appendChild(c);const u=c.offsetWidth;return document.body.removeChild(s),u}return 0}_updatePlaceholder(){const{autoPlaceholder:s,placeholderNumberType:o,nationalMode:c,customPlaceholder:u}=this.options,f=s==="aggressive"||!this.hadInitialPlaceholder&&s==="polite";if(S.utils&&f){const v=S.utils.numberType[o];let I=this.selectedCountryData.iso2?S.utils.getExampleNumber(this.selectedCountryData.iso2,c,v):"";I=this._beforeSetNumber(I),typeof u=="function"&&(I=u(I,this.selectedCountryData)),this.telInput.setAttribute("placeholder",I)}}_selectListItem(s){const o=this._setCountry(s.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(s.getAttribute("data-dial-code")),this.telInput.focus(),o&&this._triggerCountryChange()}_closeDropdown(){this.dropdownContent.classList.add("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","false"),this.selectedCountry.removeAttribute("aria-activedescendant"),this.highlightedItem&&this.highlightedItem.setAttribute("aria-selected","false"),this.options.countrySearch&&this.searchInput.removeAttribute("aria-activedescendant"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch&&this.searchInput.removeEventListener("input",this._handleSearchChange),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.options.useFullscreenPopup||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._handlePageLoad&&window.removeEventListener("load",this._handlePageLoad),this._trigger("close:countrydropdown")}_scrollTo(s){const o=this.countryList,c=document.documentElement.scrollTop,u=o.offsetHeight,f=o.getBoundingClientRect().top+c,v=f+u,I=s.offsetHeight,T=s.getBoundingClientRect().top+c,F=T+I,N=T-f+o.scrollTop;if(T<f)o.scrollTop=N;else if(F>v){const D=u-I;o.scrollTop=N-D}}_updateDialCode(s){const o=this.telInput.value,c=`+${s}`;let u;if(o.charAt(0)==="+"){const f=this._getDialCode(o);f?u=o.replace(f,c):u=c,this.telInput.value=u}}_getDialCode(s,o){let c="";if(s.charAt(0)==="+"){let u="";for(let f=0;f<s.length;f++){const v=s.charAt(f);if(!isNaN(parseInt(v,10))){if(u+=v,o)this.dialCodeToIso2Map[u]&&(c=s.substr(0,f+1));else if(this.dialCodes[u]){c=s.substr(0,f+1);break}if(u.length===this.dialCodeMaxLen)break}}}return c}_getFullNumber(s){const o=s||this.telInput.value.trim(),{dialCode:c}=this.selectedCountryData;let u;const f=H(o);return this.options.separateDialCode&&o.charAt(0)!=="+"&&c&&f?u=`+${c}`:u="",u+o}_beforeSetNumber(s){let o=s;if(this.options.separateDialCode){let c=this._getDialCode(o);if(c){c=`+${this.selectedCountryData.dialCode}`;const u=o[c.length]===" "||o[c.length]==="-"?c.length+1:c.length;o=o.substr(u)}}return this._cap(o)}_triggerCountryChange(){this._trigger("countrychange")}_formatNumberAsYouType(){const s=this._getFullNumber(),o=S.utils?S.utils.formatNumberAsYouType(s,this.selectedCountryData.iso2):s,{dialCode:c}=this.selectedCountryData;return this.options.separateDialCode&&this.telInput.value.charAt(0)!=="+"&&o.includes(`+${c}`)?(o.split(`+${c}`)[1]||"").trim():o}handleAutoCountry(){this.options.initialCountry==="auto"&&S.autoCountry&&(this.defaultCountry=S.autoCountry,this.selectedCountryData.iso2||this.selectedCountryInner.classList.contains("iti__globe")||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}handleUtils(){S.utils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this.selectedCountryData.iso2&&(this._updatePlaceholder(),this._updateMaxLength())),this.resolveUtilsScriptPromise()}destroy(){const{allowDropdown:s,separateDialCode:o}=this.options;if(s){this._closeDropdown(),this.selectedCountry.removeEventListener("click",this._handleClickSelectedCountry),this.countryContainer.removeEventListener("keydown",this._handleCountryContainerKeydown);const f=this.telInput.closest("label");f&&f.removeEventListener("click",this._handleLabelClick)}const{form:c}=this.telInput;this._handleHiddenInputSubmit&&c&&c.removeEventListener("submit",this._handleHiddenInputSubmit),this.telInput.removeEventListener("input",this._handleInputEvent),this._handleKeydownEvent&&this.telInput.removeEventListener("keydown",this._handleKeydownEvent),this.telInput.removeAttribute("data-intl-tel-input-id"),o&&(this.isRTL?this.telInput.style.paddingRight=this.originalPaddingRight:this.telInput.style.paddingLeft=this.originalPaddingLeft);const u=this.telInput.parentNode;u?.parentNode?.insertBefore(this.telInput,u),u?.parentNode?.removeChild(u),delete S.instances[this.id]}getExtension(){return S.utils?S.utils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}getNumber(s){if(S.utils){const{iso2:o}=this.selectedCountryData;return S.utils.formatNumber(this._getFullNumber(),o,s)}return""}getNumberType(){return S.utils?S.utils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}getSelectedCountryData(){return this.selectedCountryData}getValidationError(){if(S.utils){const{iso2:s}=this.selectedCountryData;return S.utils.getValidationError(this._getFullNumber(),s)}return-99}isValidNumber(){if(!this.selectedCountryData.iso2)return!1;const s=this._getFullNumber(),o=s.search(new RegExp("\\p{L}","u"));if(o>-1){const c=s.substring(0,o),u=this._utilsIsPossibleNumber(c),f=this._utilsIsPossibleNumber(s);return u&&f}return this._utilsIsPossibleNumber(s)}_utilsIsPossibleNumber(s){return S.utils?S.utils.isPossibleNumber(s,this.selectedCountryData.iso2,this.options.validationNumberType):null}isValidNumberPrecise(){if(!this.selectedCountryData.iso2)return!1;const s=this._getFullNumber(),o=s.search(new RegExp("\\p{L}","u"));if(o>-1){const c=s.substring(0,o),u=this._utilsIsValidNumber(c),f=this._utilsIsValidNumber(s);return u&&f}return this._utilsIsValidNumber(s)}_utilsIsValidNumber(s){return S.utils?S.utils.isValidNumber(s,this.selectedCountryData.iso2):null}setCountry(s){const o=s?.toLowerCase(),c=this.selectedCountryData.iso2;(s&&o!==c||!s&&c)&&(this._setCountry(o),this._updateDialCode(this.selectedCountryData.dialCode),this._triggerCountryChange())}setNumber(s){const o=this._updateCountryFromNumber(s);this._updateValFromNumber(s),o&&this._triggerCountryChange(),this._trigger("input",{isSetNumber:!0})}setPlaceholderNumberType(s){this.options.placeholderNumberType=s,this._updatePlaceholder()}setDisabled(s){this.telInput.disabled=s,s?this.selectedCountry.setAttribute("disabled","true"):this.selectedCountry.removeAttribute("disabled")}},Le=s=>{if(!S.utils&&!S.startedLoadingUtilsScript){let o;if(typeof s=="string")o=import(s);else if(typeof s=="function")try{o=Promise.resolve(s())}catch(c){return Promise.reject(c)}else return Promise.reject(new TypeError(`The argument passed to loadUtils must be a URL string or a function that returns a promise for the utilities module, not ${typeof s}`));return S.startedLoadingUtilsScript=!0,o.then(c=>{const u=c?.default;if(!u||typeof u!="object")throw typeof s=="string"?new TypeError(`The module loaded from ${s} did not set utils as its default export.`):new TypeError("The loader function passed to loadUtils did not resolve to a module object with utils as its default export.");return S.utils=u,V("handleUtils"),!0}).catch(c=>{throw V("rejectUtilsScriptPromise",c),c})}return null},S=Object.assign((s,o)=>{const c=new ne(s,o);return c._init(),s.setAttribute("data-intl-tel-input-id",c.id.toString()),S.instances[c.id]=c,c},{defaults:U,documentReady:()=>document.readyState==="complete",getCountryData:()=>p,getInstance:s=>{const o=s.getAttribute("data-intl-tel-input-id");return o?S.instances[o]:null},instances:{},loadUtils:Le,startedLoadingUtilsScript:!1,startedLoadingAutoCountry:!1,version:"24.8.2"}),Ie=S;return h(g)})();return t.default})}(le)),le.exports}var ze=He();const Ke=De(ze);function ae(){document.querySelectorAll('input[type="tel"], input#phone, input[name="phone"]').forEach(t=>{if(t.classList.contains("iti-initialized"))return;const n=Ke(t,{initialCountry:"gb",preferredCountries:["gb","fr","de","us","sa"],strictMode:!0,containerClass:"w-100",autoPlaceholder:"aggressive",formatOnDisplay:!0,nationalMode:!1,separateDialCode:!0,showFlags:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@24.7.0/build/js/utils.js",customPlaceholder:function(a,l){return a}});t.classList.add("iti-initialized"),t.itiInstance=n;const i=t.closest("form");i&&i.addEventListener("submit",function(a){const l=n.getNumber();if(t.value.trim()&&!n.isValidNumber()){a.preventDefault(),t.classList.add("is-invalid");let r=t.parentElement.querySelector(".invalid-feedback");r||(r=document.createElement("div"),r.className="invalid-feedback",t.parentElement.appendChild(r));const d=n.getValidationError(),h={0:"رقم الهاتف غير صالح",1:"رمز الدولة غير صالح",2:"الرقم قصير جداً",3:"الرقم طويل جداً",4:"رقم الهاتف غير صالح",5:"رقم الهاتف غير صالح"};return r.textContent=h[d]||"رقم الهاتف غير صالح",r.style.display="block",!1}else{t.classList.remove("is-invalid");const r=t.parentElement.querySelector(".invalid-feedback");r&&(r.style.display="none"),l&&(t.value=l)}}),t.addEventListener("input",function(){if(t.classList.contains("is-invalid")){t.classList.remove("is-invalid");const a=t.parentElement.querySelector(".invalid-feedback");a&&(a.style.display="none")}}),t.addEventListener("countrychange",function(){console.log("Selected country:",n.getSelectedCountryData())})})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ae):ae();function Je(){ae()}window.initPhoneInputs=ae;window.reinitPhoneInputs=Je;window.bootstrap=Pe;function Q(e){let t=null;return()=>(t||(t=e().then(n=>n&&n.default?n.default:n)),t)}const Ce=Q(()=>J(()=>import("./index-BZ7OSNzo.js"),[])),ve=Q(()=>J(()=>import("./choices-DNEFJAfy.js"),[])),_e=Q(()=>J(()=>import("./sweetalert2.esm.all-Dx3EkU1z.js"),[])),Se=Q(()=>J(()=>import("./quill-ChYgufvi.js"),__vite__mapDeps([3,4]))),Ee=Q(()=>J(()=>import("./easymde-Ca5tH7jq.js").then(e=>e.e),__vite__mapDeps([5,4]))),Te=Q(()=>J(()=>import("./jsvectormap.esm-Ba9GIb0h.js"),[]));window.DataTable=ge;globalThis.DataTable=ge;window.loadFlatpickr=Ce;window.loadChoices=ve;window.loadSwal=_e;window.loadQuill=Se;window.loadSimpleMDE=Ee;window.loadJSVectorMap=Te;function te(e){let t=null;const n=()=>(t||(t=e()),t);return new Proxy({},{get(i,a){if(a!=="then")return(...l)=>n().then(r=>{const d=r[a];return typeof d=="function"?d.apply(r,l):d})}})}window.Swal=te(_e);window.flatpickr=(...e)=>Ce().then(t=>t(...e));window.Choices=te(ve);window.Quill=te(Se);window.SimpleMDE=te(Ee);window.JSVectorMap=te(Te);
